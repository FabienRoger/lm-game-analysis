["In", " C", "++", "03", ",", " the", " return", " type", " of", " a", " function", " template", " cannot", " be", " generalized", " if", " the", " return", " type", " relies", " on", " those", " of", " the", " template", " arguments", ".", " Here", " is", " an", " example", ",", " mul", "(", "T", " a", ",", " T", " b", ")", " is", " a", " function", " template", " that", " calculates", " the", " product", " of", " a", " and", " b", ".", " Arg", "uments", " a", " and", " b", " are", " of", " an", " arbitrary", " type", " T", ",", " which", " is", " not", " decided", " until", " the", " template", " instant", "iation", ".", " Thus", ",", " we", " cannot", " declare", " a", " return", " type", " for", " mul", " to", " general", "ize", " all", " the", " cases", " for", " a", "*", "b", ".", " If", " we", " must", " define", " such", " a", " function", " template", ",", " we", " have", " to", " introduce", " another", " template", " parameter", " as", " follows", ":", "\n", "\n", "template", "<", "class", " T", " \ufffd", "\ufffd", "\ufffd", " class", " U", ">", "\n", "\n", "U", " mul", "(", "T", " a", ",", " T", " b", "){", "\n", "\n", "return", " a", "*", "b", ";", "\n", "\n", "}", "\n", "\n", "We", " have", " some", " trouble", " to", " instant", "iate", " this", " function", " template", " because", " we", " have", " to", " explicitly", " provide", " type", " U", " in", " the", " template", " instant", "iation", ".", " Can", " we", " use", " feature", " decl", "type", " to", " let", " the", " compiler", " ded", "uce", " the", " result", " type", " automatically", "?", " See", " the", " following", " example", ":", "\n", "\n", "template", "<", "class", " T", ">", "\n", "\n", "decl", "type", "(", "a", "*", "b", ")", " mul", "(", "T", " a", ",", " T", " b", "){", "\n", "\n", "return", " a", "*", "b", ";", "\n", "\n", "}", "\n", "\n", "This", " program", " lets", " the", " compiler", " ded", "uce", " the", " return", " type", " of", " function", " template", " mul", ".", " Unfortunately", ",", " it", " doesn", "'t", " work", ".", " The", " compiler", " is", " parsing", " codes", " from", " left", " to", " right", ",", " so", " it", " will", " issue", " an", " error", " message", " to", " indicate", " that", " variables", " a", " and", " b", " are", " used", " before", " their", " declarations", ".", "\n", "\n", "To", " solve", " this", " problem", ",", " C", "++", "11", " introduced", " a", " feature", " called", " trailing", " return", " types", ".", " Using", " this", " feature", ",", " the", " previous", " program", " can", " be", " rewritten", " as", " follows", ":", "\n", "\n", "template", "<", "class", " T", ">", "\n", "\n", "auto", " mul", "(", "T", " a", ",", " T", " b", ")", " ->", " decl", "type", "(", "a", "*", "b", "){", "\n", "\n", "return", " a", "*", "b", ";", "\n", "\n", "}", "\n", "\n", "We", " specify", " the", " function", " return", " type", " after", " the", " declaration", " of", " parameter", " declarations", ".", " Composite", " symbol", " ->", "decl", "type", "(", "t", "1", "+", "t", "2", ")", " is", " called", " a", " trailing", " return", " type", ".", " The", " auto", " keyword", " is", " placed", " before", " the", " function", " identifier", ",", " which", " is", " the", " placeholder", " of", " the", " return", " type", " spec", "ifier", ".", " When", " a", " trailing", " return", " type", " is", " used", ",", " the", " placeholder", " return", " type", " must", " be", " auto", ".", " Meanwhile", ",", " the", " auto", " type", " spec", "ifier", " cannot", " be", " used", " in", " a", " function", " declaration", " without", " a", " trailing", " return", " type", ".", "\n", "\n", "The", " biggest", " difference", " between", " ordinary", " functions", " and", " functions", " using", " trailing", " return", " types", " is", " whether", " to", " post", "pose", " the", " return", " types", ".", " See", " the", " following", " example", ":", "\n", "\n", "auto", " max", "(", "int", " a", ",", " int", " b", ")", " ->", " int", "{", "}", "\n", "\n", "Function", " max", " is", " using", " a", " trailing", " return", " type", ",", " which", " is", " equal", " to", " int", " max", "(", "int", " a", ",", " int", " b", ").", " This", " example", " shows", " a", " valid", " scenario", " of", " trailing", " return", " types", ",", " but", " it", " doesn", "'t", " reflect", " the", " benefits", " of", " this", " feature", ".", " We", " can", " fully", " enjoy", " the", " convenience", " of", " generic", " programming", " by", " using", " trailing", " return", " types", ".", " See", " the", " following", " example", ":", "\n", "\n", "#", "include", " <", "i", "ost", "ream", ">", "\n", "\n", "using", " namespace", " std", ";", "\n\n", "\n", "\n", "template", "<", "ty", "pen", "ame", " T", "1", ",", " typ", "ename", " T", "2", ">", "\n", "\n", "auto", " sum", "(", "T", "1", " &", " t", "1", ",", " T", "2", " &", " t", "2", ")", " ->", " decl", "type", "(", "t", "1", " +", " t", "2", "){", "\n", "\n", "return", " t", "1", " +", " t", "2", ";", "\n", "\n", "}", "\n", "\n", "int", " main", "(){", "\n", "\n", "auto", " i", " =", " 1", ";", "\n", "\n", "auto", " j", " =", " 1", ".", "3", ";", "\n", "\n", "auto", " k", " =", " sum", "(", "a", ",", "b", ");", "\n", "\n", "c", "out", " <<", " c", " <<", " end", "l", ";", "\n", "\n", "}", "\n", "\n", "This", " program", " doesn", "'t", " contain", " any", " explicitly", " specified", " types", ".", " All", " the", " types", " are", " ded", "uced", " by", " the", " compiler", " using", " auto", " type", " deductions", " and", " trailing", " return", " types", ",", " which", " saves", " a", " lot", " of", " programming", " efforts", ".", "\n\n", "\n", "\n", "Another", " benefit", " of", " using", " trailing", " return", " types", " is", " the", " improvement", " of", " read", "ability", " and", " maintain", "ability", " of", " programs", ".", " See", " the", " following", " example", ":", "\n", "\n", "template", " <", "class", " T", ">", " class", " tmp", "{", "\n", "\n", "public", ":", "\n", "\n", "int", " i", ";", "\n", "\n", "};", "\n", "\n", "tmp", "<", "int", ">", " (*", "(*", "foo", "())", "())", "()", " {", "\n", "\n", "return", " 0", ";", "\n", "\n", "}", "\n", "\n", "Do", " you", " feel", " terrible", " after", " reading", " this", " program", "?", " Actually", ",", " foo", " is", " a", " function", " whose", " return", " type", " is", " a", " function", " pointer", ".", " The", " function", " pointer", " points", " to", " a", " function", " that", " returns", " a", " function", " pointer", ".", " Using", " trailing", " return", " types", ",", " the", " previous", " program", " can", " be", " rewritten", " as", " follows", ":", "\n", "\n", "template", " <", "class", " T", ">", " class", " tmp", "{", "\n", "\n", "public", ":", "\n", "\n", "int", " i", ";", "\n", "\n", "};", "\n", "\n", "auto", " foo", "(", " )", "->", "a", " ut", "o", "(", " *)", "()", " ->", "tm", " p", "<", "in", " t", ">(", "*", " )", "()", " {", "\n", "\n", "return", " 0", ";", "\n", "\n", "}", "\n", "\n", "Do", " you", " see", " the", " magic", " of", " trailing", " return", " types", " in", " this", " example", "?"]