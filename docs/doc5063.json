["SQL", " is", " a", " really", " cool", " language", ".", " I", " can", " write", " really", " complex", " business", " logic", " with", " this", " logic", " programming", " language", ".", " I", " was", " again", " thrilled", " about", " SQL", " recently", ",", " at", " a", " customer", " site", ":", "\n", "\n", "Writing", " some", " nifty", " SQL", " queries", " for", " a", " customer", ".", " Wond", "ering", " why", " anyone", " would", " even", " consider", " using", " a", " 3", "GL", " for", " any", " business", " logic", " at", " all", "??", " \u2014", " Luk", "as", " E", "der", " (@", "lu", "k", "ased", "er", ")", " August", " 21", ",", " 2017", "\n", "\n", "But", " whenever", " I", " tweet", " something", " like", " the", " above", ",", " the", " inevitable", " happened", ".", " I", " was", " nerd", " sn", "iped", ".", " O", "leg", " \ufffd", "\ufffd", "el", "aj", "ev", " from", " Zero", "Turn", "around", " challenged", " me", " to", " prove", " that", " SQL", " is", " so", " awesome", ":", "\n", "\n", "You", " have", " a", " String", " s", " (", "of", " length", " N", "),", " find", " all", " (", "i", ";", " j", "),", " i", " <", " j", ",", " such", " that", " s", "[", "i", ":", "j", "]", " is", " a", " pal", "ind", "rome", ".", " For", " bonus", " points", ",", " do", " it", " in", " O", "(", "n", ")", " or", " O", "(", "n", "*", "log", "(", "n", "))", " \u2014", " O", "leg", " \ufffd", "\ufffd", "el", "aj", "ev", " (@", "s", "hel", "aj", "ev", ")", " August", " 21", ",", " 2017", "\n", "\n", "Given", " a", " string", ",", " find", " all", " sub", "strings", " from", " that", " string", ",", " which", " are", " pal", "ind", "rom", "es", ".", " Challenge", " accepted", "!", " (", "For", " the", " moment", ",", " let", "\ufffd", "\ufffd", "s", " forget", " about", " algorith", "mic", " complexity", ".)", "\n", "\n", "Here", "\ufffd", "\ufffd", "s", " the", " Full", " Query", "\n", "\n", "Spoiler", " first", ".", "\n", "\n", "Bear", " with", " me", ",", " I", "\ufffd", "\ufffd", "ll", " explain", " it", " step", " by", " step", " afterwards", ".", " Here", "\ufffd", "\ufffd", "s", " with", " Post", "greSQL", " syntax", ":", "\n", "\n", "W", "ITH", " REC", "UR", "S", "IVE", " words", " (", "word", ")", " AS", " (", " VAL", "UES", " ('", "p", "neum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", "ocon", "iosis", "'),", " ('", "pse", "ud", "op", "se", "ud", "oh", "yp", "op", "ar", "athy", "roid", "ism", "'),", " ('", "fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", "'),", " ('", "ant", "idis", "establishment", "arian", "ism", "'),", " ('", "super", "cal", "if", "rag", "il", "ist", "ice", "xp", "ial", "id", "ocious", "'),", " ('", "in", "com", "pre", "hens", "ibilities", "'),", " ('", "hon", "or", "ific", "ab", "ilit", "ud", "init", "at", "ibus", "'),", " ('", "t", "att", "arr", "att", "at", "')", " ),", " starts", " (", "word", ",", " start", ")", " AS", " (", " SELECT", " word", ",", " 1", " FROM", " words", " UN", "ION", " ALL", " SELECT", " word", ",", " start", " +", " 1", " FROM", " starts", " WHERE", " start", " <", " length", "(", "word", ")", " ),", " pal", "ind", "rom", "es", " (", "word", ",", " pal", "ind", "rome", ",", " start", ",", " length", ")", " AS", " (", " SELECT", " word", ",", " subst", "ring", "(", "word", ",", " start", ",", " x", "),", " start", ",", " x", " FROM", " starts", " CR", "OSS", " JO", "IN", " (", "VAL", "UES", "(", "0", "),", " (", "1", "))", " t", "(", "x", ")", " UN", "ION", " ALL", " SELECT", " word", ",", " pal", "ind", "rome", ",", " start", ",", " length", " +", " 2", " FROM", " (", " SELECT", " word", ",", " subst", "ring", "(", "word", ",", " start", " -", " length", " /", " 2", ",", " length", ")", " AS", " pal", "ind", "rome", ",", " start", ",", " length", " FROM", " pal", "ind", "rom", "es", " )", " AS", " p", " WHERE", " start", " -", " length", " /", " 2", " >", " 0", " AND", " start", " +", " (", "length", " -", " 1", ")", " /", " 2", " <=", " length", "(", "word", ")", " AND", " subst", "ring", "(", "pal", "ind", "rome", ",", " 1", ",", " 1", ")", " =", " subst", "ring", "(", "pal", "ind", "rome", ",", " length", "(", "pal", "ind", "rome", "),", " 1", ")", " )", " SELECT", " D", "IST", "IN", "CT", " word", ",", " trim", "(", "replace", "(", "word", ",", " pal", "ind", "rome", ",", " '", " '", " ||", " upper", "(", "pal", "ind", "rome", ")", " ||", " '", " '", "))", " AS", " pal", "ind", "rom", "es", " FROM", " pal", "ind", "rom", "es", " WHERE", " length", "(", "pal", "ind", "rome", ")", " >", " 1", " ORDER", " BY", " 2", "\n", "\n", "(", "You", " can", " run", " it", " yourself", " on", " SQL", "F", "iddle", ")", "\n", "\n", "The", " result", " being", ":", "\n", "\n", "word", " |", "pal", "ind", "rom", "es", " --------------------------------", "--------------", "|", "--------------------------------", "---------------", " ant", "idis", "establishment", "arian", "ism", " |", "ant", " ID", "I", " s", "establishment", "arian", "ism", " ant", "idis", "establishment", "arian", "ism", " |", "ant", "idi", " S", "ES", " tab", "lish", "ment", "arian", "ism", " fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", " |", "flo", " CC", " in", "auc", "in", "ihil", "ip", "il", "ification", " fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", " |", "fl", "occ", "in", "auc", " IN", "I", " h", "il", "ip", "il", "ification", " fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", " |", "fl", "occ", "in", "auc", "in", " I", "HI", " lip", "il", "ification", " fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", " |", "fl", "occ", "in", "auc", "in", "ih", " IL", "I", " p", " IL", "I", " f", "ication", " fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", " |", "fl", "occ", "in", "auc", "in", "ih", " IL", "IP", "IL", "I", " f", "ication", " fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", " |", "fl", "occ", "in", "auc", "in", "ih", "i", " L", "IP", "IL", " if", "ication", " fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", " |", "fl", "occ", "in", "auc", "in", "ihil", " IP", "I", " l", "ification", " fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", " |", "fl", "occ", "in", "auc", "in", "ihil", "ip", "il", " I", "FI", " c", "ation", " honor", "ific", "ab", "ilit", "ud", "init", "at", "ibus", " |", "h", " ON", "O", " r", "ific", "ab", "ilit", "ud", "init", "at", "ibus", " honor", "ific", "ab", "ilit", "ud", "init", "at", "ibus", " |", "hon", "or", " I", "FI", " cab", "ilit", "ud", "init", "at", "ibus", " honor", "ific", "ab", "ilit", "ud", "init", "at", "ibus", " |", "hon", "or", "ific", "ab", " IL", "I", " t", "ud", "init", "at", "ibus", " honor", "ific", "ab", "ilit", "ud", "init", "at", "ibus", " |", "hon", "or", "ific", "ab", "ilit", "ud", " IN", "I", " t", "at", "ibus", " honor", "ific", "ab", "ilit", "ud", "init", "at", "ibus", " |", "hon", "or", "ific", "ab", "ilit", "ud", "in", " IT", "AT", "I", " bus", " honor", "ific", "ab", "ilit", "ud", "init", "at", "ibus", " |", "hon", "or", "ific", "ab", "ilit", "ud", "ini", " T", "AT", " ib", "us", " incomp", "rehens", "ibilities", " |", "in", "com", "pr", " E", "HE", " ns", "ibilities", " incomp", "rehens", "ibilities", " |", "in", "com", "pre", "hens", " I", "BI", " l", "ities", " incomp", "rehens", "ibilities", " |", "in", "com", "pre", "hens", "ib", " IL", "I", " ties", " incomp", "rehens", "ibilities", " |", "in", "com", "pre", "hens", "ib", "il", " IT", "I", " es", " pneum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", "ocon", "iosis", " |", "p", "neum", " ON", "O", " ult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", "ocon", "ios", " pneum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", "ocon", "iosis", " |", "p", "neum", "on", "oult", "ram", "icro", "sc", "op", "ics", " IL", "I", " cov", "ol", "can", "ocon", "ios", " pneum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", "ocon", "iosis", " |", "p", "neum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", " O", "VO", " l", "can", "ocon", "ios", " pneum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", "ocon", "iosis", " |", "p", "neum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "ca", " N", "OC", "ON", " i", "os", " pneum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", "ocon", "iosis", " |", "p", "neum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", " O", "CO", " n", "ios", " pneum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", "ocon", "iosis", " |", "p", "neum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", "ocon", "io", " S", "IS", " pseud", "op", "se", "ud", "oh", "yp", "op", "ar", "athy", "roid", "ism", " |", "pse", "ud", "op", "se", "ud", "oh", "y", " POP", " ar", "athy", "roid", "ism", " pseud", "op", "se", "ud", "oh", "yp", "op", "ar", "athy", "roid", "ism", " |", "pse", "ud", "op", "se", "ud", "oh", "yp", "op", " A", "RA", " thyroid", "ism", " pseud", "op", "se", "ud", "oh", "yp", "op", "ar", "athy", "roid", "ism", " |", "pse", "ud", "op", "se", "ud", "oh", "yp", "op", "ar", "athy", "ro", " ID", "I", " sm", " super", "cal", "if", "rag", "il", "ist", "ice", "xp", "ial", "id", "ocious", " |", "super", "cal", "if", "rag", " IL", "I", " st", "ice", "xp", "ial", "id", "ocious", " tatt", "arr", "att", "at", " |", "t", " AT", "TA", " r", "r", " AT", "TA", " t", " tatt", "arr", "att", "at", " |", "t", " ATT", "ARR", "AT", "TA", " t", " tatt", "arr", "att", "at", " |", "ta", " TT", " arra", " TT", " at", " tatt", "arr", "att", "at", " |", "ta", " TT", "ARR", "ATT", " at", " tatt", "arr", "att", "at", " |", "t", "at", " T", "ARR", "AT", " t", "at", " tatt", "arr", "att", "at", " |", "T", "AT", " t", "arr", "at", " T", "AT", " tatt", "arr", "att", "at", " |", "t", "att", " AR", "RA", " t", "t", "at", " tatt", "arr", "att", "at", " |", "t", "atta", " RR", " att", "at", " tatt", "arr", "att", "at", " |", "T", "ATT", "ARR", "ATT", "AT", "\n", "\n", "This", " query", " uses", " a", " couple", " of", " nice", " features", ":", "\n", "\n", "Common", " Table", " Express", "ions", "\n", "\n", "They", "\ufffd", "\ufffd", "re", " the", " only", " way", " to", " declare", " variables", " in", " SQL", " \u2013", " i", ".", "e", ".", " you", " can", " \ufffd", "\ufffd", "store", "\ufffd", "\ufffd", " a", " query", " in", " such", " a", " table", " expression", ",", " assign", " a", " name", " to", " it", ",", " and", " reuse", " it", " several", " times", ".", " This", " is", " done", " with", " the", " WITH", " clause", ".", " The", " nice", " thing", " about", " common", " table", " expressions", " is", " that", " they", " are", " allowed", " to", " be", " REC", "UR", "S", "IVE", " (", "depending", " on", " the", " database", ",", " the", " REC", "UR", "S", "IVE", " keyword", " may", " be", " required", " /", " optional", " /", " not", " available", ").", "\n", "\n", "VAL", "UES", "()", " clause", "\n", "\n", "The", " VAL", "UES", "()", " clause", " is", " a", " very", " handy", " tool", " to", " create", " ad", "-", "h", "oc", " data", " in", " the", " form", " of", " tables", ".", " We", " did", " this", " to", " create", " a", " table", " called", " WOR", "DS", ",", " which", " contains", " a", " couple", " of", " words", " inside", " of", " which", " we", "\ufffd", "\ufffd", "d", " like", " to", " look", " for", " pal", "ind", "rom", "es", ".", " In", " some", " databases", " (", "including", " DB", "2", " and", " Post", "greSQL", "),", " it", "\ufffd", "\ufffd", "s", " totally", " possible", " to", " just", " use", " the", " VAL", "UES", "()", " clause", " as", " a", " standalone", " clause", " instead", " of", " SELECT", " :", "\n", "\n", "VAL", "UES", " ('", "p", "neum", "on", "oult", "ram", "icro", "sc", "op", "ics", "ilic", "ov", "ol", "can", "ocon", "iosis", "'),", " ('", "pse", "ud", "op", "se", "ud", "oh", "yp", "op", "ar", "athy", "roid", "ism", "'),", " ('", "fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", "'),", " ('", "ant", "idis", "establishment", "arian", "ism", "'),", " ('", "super", "cal", "if", "rag", "il", "ist", "ice", "xp", "ial", "id", "ocious", "'),", " ('", "in", "com", "pre", "hens", "ibilities", "'),", " ('", "hon", "or", "ific", "ab", "ilit", "ud", "init", "at", "ibus", "'),", " ('", "t", "att", "arr", "att", "at", "')", "\n", "\n", "Rec", "ursive", " Generation", " of", " Integ", "ers", "\n", "\n", "In", " order", " to", " look", " for", " pal", "ind", "rom", "es", ",", " the", " algorithm", " used", " here", " lists", ",", " for", " each", " word", ",", " the", " character", " index", " of", " each", " individual", " character", " in", " the", " word", ":", "\n", "\n", "W", "ITH", " REC", "UR", "S", "IVE", "...", " starts", " (", "word", ",", " start", ")", " AS", " (", " SELECT", " word", ",", " 1", " FROM", " words", " UN", "ION", " ALL", " SELECT", " word", ",", " start", " +", " 1", " FROM", " starts", " WHERE", " start", " <", " length", "(", "word", ")", " ),", "...", "\n", "\n", "For", " example", ",", " if", " we", " used", " the", " word", " \ufffd", "\ufffd", "word", "\ufffd", "\ufffd", "\u2026", "\n", "\n", "W", "ITH", " REC", "UR", "S", "IVE", " words", " (", "word", ")", " AS", " (", "VAL", "UES", "('", "word", "')", "),", " starts", " (", "word", ",", " start", ")", " AS", " (", " SELECT", " word", ",", " 1", " FROM", " words", " UN", "ION", " ALL", " SELECT", " word", ",", " start", " +", " 1", " FROM", " starts", " WHERE", " start", " <", " length", "(", "word", ")", " )", " SELECT", " *", " FROM", " starts", "\n", "\n", "We", "\ufffd", "\ufffd", "d", " get", " the", " following", " result", ":", "\n", "\n", "word", " |", "start", " ----", "-|", "------", " word", " |", "1", " word", " |", "2", " word", " |", "3", " word", " |", "4", "\n", "\n", "The", " idea", " of", " the", " algorithm", " is", " that", " we", " start", " from", " a", " given", " character", " and", " \ufffd", "\ufffd", "fan", " out", "\ufffd", "\ufffd", " in", " both", " directions", " of", " a", " character", ",", " again", " rec", "urs", "ively", ".", " The", " characters", " to", " the", " left", " and", " to", " the", " right", " of", " such", " a", " character", " must", " be", " the", " same", " and", " so", " on", ".", "\n", "\n", "If", " you", "\ufffd", "\ufffd", "re", " interested", " in", " the", " syntax", ",", " stay", " tuned", ".", " There", " will", " be", " a", " blog", " post", " coming", " up", " soon", ".", "\n", "\n", "Using", " CR", "OSS", " JO", "IN", " to", " run", " the", " Al", "gorithm", " Twice", "\n", "\n", "There", " are", " two", " types", " of", " pal", "ind", "rom", "es", ":", "\n", "\n", "Those", " with", " an", " even", " amount", " of", " characters", ":", " \ufffd", "\ufffd", "\ufffd", "\ufffd", ",", " \ufffd", "\ufffd", "aa", "\ufffd", "\ufffd", ",", " \ufffd", "\ufffd", "abba", "\ufffd", "\ufffd", ",", " \ufffd", "\ufffd", "b", "abb", "ab", "\ufffd", "\ufffd", "\n", "\n", "Those", " with", " an", " odd", " amount", " of", " characters", ":", " \ufffd", "\ufffd", "b", "\ufffd", "\ufffd", ",", " \ufffd", "\ufffd", "aba", "\ufffd", "\ufffd", ",", " \ufffd", "\ufffd", "a", "ab", "aa", "\ufffd", "\ufffd", "\n", "\n", "In", " our", " algorithm", ",", " we", "\ufffd", "\ufffd", "re", " treating", " them", " in", " almost", " the", " same", " way", " by", " running", " the", " algorithm", " twice", ".", " Whenever", " you", " think", " \ufffd", "\ufffd", "hey", ",", " I", " need", " to", " run", " this", " twice", " in", " SQL", "\ufffd", "\ufffd", ",", " CR", "OSS", " JO", "IN", " could", " be", " a", " good", " candidate", ",", " as", " we", "\ufffd", "\ufffd", "re", " creating", " a", " cart", "esian", " product", " between", ":", "\n", "\n", "The", " previous", " \ufffd", "\ufffd", "st", "arts", "\ufffd", "\ufffd", " table", ",", " giving", " the", " starting", " character", " index", "\n", "\n", "A", " table", " containing", " values", " 0", " (", "pal", "ind", "rom", "es", " with", " even", " amounts", " of", " letters", ")", " and", " 1", " (", "pal", "ind", "rom", "es", " with", " odd", " amounts", " of", " letters", ")", "\n", "\n", "For", " more", " information", " about", " CR", "OSS", " JO", "IN", ",", " read", " our", " article", " about", " JO", "IN", "s", ".", "\n", "\n", "Run", " this", " query", " for", " illustration", ":", "\n", "\n", "W", "ITH", " REC", "UR", "S", "IVE", " words", " (", "word", ")", " AS", " (", "VAL", "UES", "('", "word", "')", "),", " starts", " (", "word", ",", " start", ")", " AS", " (", " SELECT", " word", ",", " 1", " FROM", " words", " UN", "ION", " ALL", " SELECT", " word", ",", " start", " +", " 1", " FROM", " starts", " WHERE", " start", " <", " length", "(", "word", ")", " )", " SELECT", " *", " FROM", " starts", " CR", "OSS", " JO", "IN", " (", "VAL", "UES", "(", "0", "),", "(", "1", "))", " AS", " t", "(", "x", ")", "\n", "\n", "Output", ":", "\n", "\n", "word", " |", "start", " |", "x", " ----", "-|", "------", "|", "--", " word", " |", "1", " |", "0", " <", "--", " Even", " length", " pal", "ind", "rom", "es", " cent", "ering", " around", " position", " 1", " length", " 0", " word", " |", "1", " |", "1", " <", "--", " Odd", " length", " pal", "ind", "rom", "es", " cent", "ering", " around", " position", " 1", " length", " 1", " word", " |", "2", " |", "0", " word", " |", "2", " |", "1", " word", " |", "3", " |", "0", " word", " |", "3", " |", "1", " word", " |", "4", " |", "0", " word", " |", "4", " |", "1", "\n", "\n", "Tri", "v", "ially", ",", " a", " pal", "ind", "rome", " of", " length", " 0", " (", "empty", " string", ")", " or", " length", " 1", " (", "\ufffd", "\ufffd", "w", "\ufffd", "\ufffd", ",", " \ufffd", "\ufffd", "o", "\ufffd", "\ufffd", ",", " \ufffd", "\ufffd", "r", "\ufffd", "\ufffd", ",", " \ufffd", "\ufffd", "d", "\ufffd", "\ufffd", ")", " is", " acceptable", " in", " principle", ",", " but", " boring", ".", " We", "\ufffd", "\ufffd", "ll", " filter", " them", " out", " later", ",", " but", " keep", " them", " in", " the", " algorithm", " as", " this", " simpl", "ifies", " the", " algorithm", ".", " If", " you", " want", " to", " tune", " the", " query", ",", " you", " could", " prevent", " generating", " them", " in", " the", " first", " place", ".", "\n", "\n", "The", " Pal", "ind", "rome", " Al", "gorithm", "\n", "\n", "Thus", " far", ",", " we", "\ufffd", "\ufffd", "ve", " just", " prepared", " utility", " data", " to", " calculate", " pal", "ind", "rom", "es", ":", "\n", "\n", "The", " words", " inside", " of", " which", " to", " search", " for", " pal", "ind", "rom", "es", "\n", "\n", "The", " individual", " character", " indexes", " to", " start", " fan", "ning", " out", " from", ",", " in", " each", " individual", " word", "\n", "\n", "The", " minimum", " pal", "ind", "rome", " length", " 0", " (", "even", ")", " or", " 1", " (", "odd", ")", "\n", "\n", "Now", " comes", " the", " interesting", " part", ".", " Rec", "urs", "ively", " fan", "ning", " out", " from", " a", " starting", " character", " to", " find", " more", " pal", "ind", "rom", "es", ",", " stopping", " the", " fan", "ning", " out", " as", " soon", " as", " the", " new", " candidate", " is", " no", " longer", " a", " plain", "d", "rome", ":", "\n", "\n", "W", "ITH", " REC", "UR", "S", "IVE", "...", " pal", "ind", "rom", "es", " (", "word", ",", " pal", "ind", "rome", ",", " start", ",", " length", ")", " AS", " (", " --", " This", " part", " just", " creates", " the", " even", "/", "odd", " semantics", " SELECT", " word", ",", " subst", "ring", "(", "word", ",", " start", ",", " x", "),", " start", ",", " x", " FROM", " starts", " CR", "OSS", " JO", "IN", " (", "VAL", "UES", "(", "0", "),", " (", "1", "))", " t", "(", "x", ")", " UN", "ION", " ALL", " --", " This", " part", " rec", "urses", " by", " \"", "fan", "ning", " out", "\"", " SELECT", " word", ",", " pal", "ind", "rome", ",", " start", ",", " length", " +", " 2", " FROM", " (", " SELECT", " word", ",", " subst", "ring", "(", "word", ",", " start", " -", " length", " /", " 2", ",", " length", ")", " AS", " pal", "ind", "rome", ",", " start", ",", " length", " FROM", " pal", "ind", "rom", "es", " )", " AS", " p", " WHERE", " start", " -", " length", " /", " 2", " >", " 0", " AND", " start", " +", " (", "length", " -", " 1", ")", " /", " 2", " <=", " length", "(", "word", ")", " AND", " subst", "ring", "(", "pal", "ind", "rome", ",", " 1", ",", " 1", ")", " =", " subst", "ring", "(", "pal", "ind", "rome", ",", " length", "(", "pal", "ind", "rome", "),", " 1", ")", " )", "...", "\n", "\n", "It", " isn", "\ufffd", "\ufffd", "t", " really", " so", " hard", " in", " fact", ".", " The", " rec", "ursion", " part", " selects", " rec", "urs", "ively", " from", " the", " PAL", "IN", "DR", "OM", "ES", " table", " (", "the", " previously", " calculated", " pal", "ind", "rom", "es", ").", " That", " table", " has", " 4", " columns", ":", "\n", "\n", "W", "ORD", " :", " The", " word", " we", "\ufffd", "\ufffd", "re", " looking", " for", " pal", "ind", "rom", "es", " in", ".", " This", " is", " always", " the", " same", " per", " rec", "ursion", "\n", "\n", ":", " The", " word", " we", "\ufffd", "\ufffd", "re", " looking", " for", " pal", "ind", "rom", "es", " in", ".", " This", " is", " always", " the", " same", " per", " rec", "ursion", " PAL", "IN", "DR", "OME", " :", " The", " pal", "ind", "rome", ",", " i", ".", "e", ".", " the", " subst", "ring", " inside", " of", " a", " word", ".", " This", " changes", " per", " rec", "ursion", "\n", "\n", ":", " The", " pal", "ind", "rome", ",", " i", ".", "e", ".", " the", " subst", "ring", " inside", " of", " a", " word", ".", " This", " changes", " per", " rec", "ursion", " START", " :", " The", " start", " character", " index", " from", " which", " we", " started", " fan", "ning", " out", ".", " This", " is", " always", " the", " same", " per", " rec", "ursion", "\n", "\n", ":", " The", " start", " character", " index", " from", " which", " we", " started", " fan", "ning", " out", ".", " This", " is", " always", " the", " same", " per", " rec", "ursion", " L", "ENGTH", " :", " The", " pal", "ind", "rome", " length", ".", " This", " increases", " by", " 2", " per", " rec", "ursion", "\n", "\n", "Let", "\ufffd", "\ufffd", "s", " look", " at", " the", " result", " for", " \ufffd", "\ufffd", "fl", "occ", "in", "auc", "in", "ihil", "ip", "il", "ification", "\ufffd", "\ufffd", ":", "\n", "\n", "flo", " CC", " in", "auc", "in", "ihil", "ip", "il", "ification", " fl", "occ", "in", "auc", " IN", "I", " h", "il", "ip", "il", "ification", " fl", "occ", "in", "auc", "in", " I", "HI", " lip", "il", "ification", " fl", "occ", "in", "auc", "in", "ih", " IL", "I", " p", " IL", "I", " f", "ication", " fl", "occ", "in", "auc", "in", "ih", " IL", "IP", "IL", "I", " f", "ication", " fl", "occ", "in", "auc", "in", "ih", "i", " L", "IP", "IL", " if", "ication", " fl", "occ", "in", "auc", "in", "ihil", " IP", "I", " l", "ification", " fl", "occ", "in", "auc", "in", "ihil", "ip", "il", " I", "FI", " c", "ation", "\n", "\n", "There", " are", " a", " total", " of", " 8", " distinct", " pal", "ind", "rom", "es", " contained", " in", " this", " word", " (", "and", " believe", " it", " or", " not", ",", " the", " word", " exists", ",", " too", ".", " P", "ron", "unciation", " is", " another", " thing", ").", "\n", "\n", "Let", "\ufffd", "\ufffd", "s", " \ufffd", "\ufffd", "debug", "\ufffd", "\ufffd", " the", " algorithm", " to", " get", " to", " this", " list", " (", "remember", ",", " SQL", " indexes", " are", " 1", " based", "):", "\n", "\n", "Start", " 1", "-", "4", ":", " No", " pal", "ind", "rom", "es", " Start", " 5", ":", " Even", " pal", "ind", "rome", " [", "4", ":", "5", "]", " flo", " CC", " in", "auc", "in", "ihil", "ip", "il", "ification", " Start", " 6", "-", "11", ":", " No", " pal", "ind", "rom", "es", " (", "I", " wont", "'", " repeat", " this", " further", " down", ")", " Start", " 12", ":", " Odd", " pal", "ind", "rome", " [", "11", ":", "13", "]", " fl", "occ", "in", "auc", " IN", "I", " h", "il", "ip", "il", "ification", " Start", " 14", ":", " Odd", " pal", "ind", "rome", " [", "13", ":", "15", "]", " fl", "occ", "in", "auc", "in", " I", "HI", " lip", "il", "ification", " Start", " 16", ":", " Odd", " pal", "ind", "rome", " [", "15", ":", "17", "]", " fl", "occ", "in", "auc", "in", "ih", " IL", "I", " p", " IL", "I", " f", "ication", " Start", " 18", ":", " Odd", " pal", "ind", "rome", " [", "17", ":", "19", "],", " [", "16", ":", "20", "],", " [", "15", ":", "21", "]", " (", "Fan", "ning", " out", " 3", " times", ")", " fl", "occ", "in", "auc", "in", "ihil", " IP", "I", " l", "ification", " fl", "occ", "in", "auc", "in", "ih", "i", " L", "IP", "IL", " if", "ication", " fl", "occ", "in", "auc", "in", "ih", " IL", "IP", "IL", "I", " f", "ication", " Start", " 20", ":", " Odd", " pal", "ind", "rome", " [", "19", ":", "17", "]", " (", "al", "ready", " found", " this", ")", " fl", "occ", "in", "auc", "in", "ih", " IL", "I", " p", " IL", "I", " f", "ication", " Start", " 22", ":", " Odd", " pal", "ind", "rome", " [", "21", ":", "23", "]", " fl", "occ", "in", "auc", "in", "ihil", "ip", "il", " I", "FI", " c", "ation", "\n", "\n", "The", " IP", "I", ",", " L", "IP", "IL", ",", " IL", "IP", "IL", "I", " chain", " is", " the", " most", " interesting", ".", " We", "\ufffd", "\ufffd", "ve", " succeeded", " to", " fan", " out", " 3", " times", " adding", " new", " characters", " from", " W", "ORD", " on", " both", " sides", " of", " the", " initial", " character", ".", "\n", "\n", "When", " do", " we", " stop", " fan", "ning", " out", "?", " Whenever", " one", " of", " these", " conditions", " hold", " true", ":", "\n", "\n", "WHERE", " start", " -", " length", " /", " 2", " >", " 0", " AND", " start", " +", " (", "length", " -", " 1", ")", " /", " 2", " <=", " length", "(", "word", ")", " AND", " subst", "ring", "(", "pal", "ind", "rome", ",", " 1", ",", " 1", ")", " =", " subst", "ring", "(", "pal", "ind", "rome", ",", " length", "(", "pal", "ind", "rome", "),", " 1", ")", "\n", "\n", "I", ".", "e", ".", "\n", "\n", "When", " we", "\ufffd", "\ufffd", "ve", " reached", " the", " beginning", " of", " W", "ORD", " (", "no", " more", " characters", " to", " the", " left", ")", "\n", "\n", "When", " we", "\ufffd", "\ufffd", "ve", " reached", " the", " end", " of", " W", "ORD", " (", "no", " more", " characters", " to", " the", " right", ")", "\n", "\n", "When", " the", " letter", " to", " the", " left", " of", " the", " pal", "ind", "rome", " of", " the", " previous", " rec", "ursion", " doesn", "\ufffd", "\ufffd", "t", " match", " the", " letter", " to", " the", " right", " of", " the", " pal", "ind", "rome", "\n", "\n", "That", " last", " predicate", " could", " also", " simply", " read", ":", "\n", "\n", "AND", " pal", "ind", "rome", " =", " reverse", "(", "pal", "ind", "rome", ")", "\n", "\n", "But", " that", " might", " be", " a", " bit", " slower", " as", " it", " compares", " something", " that", " we", "\ufffd", "\ufffd", "ve", " already", " proven", " to", " be", " true", " in", " the", " previous", " rec", "ursion", ".", "\n", "\n", "Finally", ",", " formatting", " the", " result", "\n", "\n", "The", " final", " part", " isn", "\ufffd", "\ufffd", "t", " too", " interesting", " anymore", ":", "\n", "\n", "SELECT", " D", "IST", "IN", "CT", " word", ",", " trim", "(", "replace", "(", "word", ",", " pal", "ind", "rome", ",", " '", " '", " ||", " upper", "(", "pal", "ind", "rome", ")", " ||", " '", " '", "))", " AS", " pal", "ind", "rom", "es", " FROM", " pal", "ind", "rom", "es", " WHERE", " length", "(", "pal", "ind", "rome", ")", " >", " 1", " ORDER", " BY", " 2", "\n", "\n", "We", "\ufffd", "\ufffd", "ll", " simply", ":", "\n", "\n", "Select", " D", "IST", "IN", "CT", " results", " only", ",", " as", " pal", "ind", "rom", "es", " might", " appear", " several", " times", " in", " a", " word", "\n", "\n", "results", " only", ",", " as", " pal", "ind", "rom", "es", " might", " appear", " several", " times", " in", " a", " word", " Replace", " the", " pal", "ind", "rome", " subst", "ring", " by", " its", " upper", " case", " version", " and", " add", " some", " whites", "pace", " to", " better", " visual", "ise", " it", ".", " That", "\ufffd", "\ufffd", "s", " totally", " optional", ",", " of", " course", "\n", "\n", "Remove", " the", " trivial", " pal", "ind", "rom", "es", " of", " length", " 0", " and", " 1", "\n", "\n", "And", " we", "\ufffd", "\ufffd", "re", " done", "!", " Again", ",", " feel", " free", " to", " play", " around", " with", " this", " on", " SQL", "F", "iddle", ",", " or", ",", " much", " better", ",", " provide", " a", " cool", " pal", "ind", "rome", " algorithm", " implementation", " in", " your", " favourite", " language", " in", " the", " comments", " section", ",", " or", " on", " Twitter", ":", "\n", "\n", "More", " beautiful", " SQL", " in", " these", " articles", " here", ":"]