["Advanced", " Minecraft", " Marketing", " Analytics", "\n", "\n", "I", "\ufffd", "\ufffd", "ve", " mentioned", " a", " few", " times", " the", " power", " of", " my", " analytics", " system", " in", " the", " Sp", "ig", "ot", " community", " and", " recently", " in", " Admin", "Craft", " on", " Reddit", ".", " Most", " advertising", " campaigns", " simply", " track", " impressions", " and", " clicks", ".", " But", " to", " a", " server", " owner", ",", " we", " need", " more", " data", " than", " that", "\u2026.", " We", " need", " to", " know", " who", " actually", " joined", " the", " server", " and", " continues", " to", " play", "!", "\n", "\n", "I", " have", " designed", " such", " a", " system", ",", " where", " I", " can", " track", " clicks", ",", " how", " many", " joined", " the", " game", " server", ",", " then", " out", " of", " those", ",", " who", " stay", " to", " the", " day", " 5", ",", " 15", ",", " 30", ",", " 60", " and", " 90", " markers", "!", " I", " can", " see", " when", " campaigns", " generate", " a", " lot", " of", " clicks", ",", " yet", " low", " players", ",", " or", " worse", ":", " players", " who", " don", "\ufffd", "\ufffd", "t", " actually", " stay", ".", "\n", "\n", "This", " article", " will", " give", " a", " rough", " idea", " on", " how", " I", " did", " it", " inc", "ase", " someone", " is", " curious", " to", " implement", " it", " on", " their", " own", ".", "\n", "\n", "I", " want", " to", " be", " straight", " that", " the", " implementation", " isn", "\ufffd", "\ufffd", "t", " perfect", " or", " the", " most", " optimized", ",", " but", " hey", " it", " gives", " you", " data", " where", " you", " normally", " would", " not", " have", " data", ",", " so", " that", "\ufffd", "\ufffd", "s", " a", " clear", " winner", "!", "\n", "\n", "Requirements", " /", " Dis", "claimer", "\n", "\n", "This", " system", " only", " works", " for", " advertising", " campaigns", " that", " involve", " website", " clicks", ".", " Campaign", "s", " that", " serve", " purely", " as", " a", " banner", " and", " a", " server", " connect", " address", " can", " not", " be", " realistically", " tracked", ".", "\n", "\n", "My", " implementation", " all", " revolves", " around", " Google", " Analytics", ",", " but", " the", " concept", " can", " work", " for", " any", " form", " of", " marketing", " system", " you", " want", " to", " adapt", " it", " to", ".", "\n", "\n", "You", " should", " be", " using", " analytics", ".", "js", " (", "I", " do", " not", " think", " this", " works", " with", " ga", ".", "js", ",", " the", " old", " Analytics", " system", ")", " on", " every", " page", " of", " your", " site", ".", "\n", "\n", "You", " will", " also", " need", " to", " be", " an", " experienced", " developer", " or", " have", " one", " on", " hand", ".", "\n", "\n", "I", " WILL", " NOT", " HELP", " ANY", "ONE", " IMP", "LE", "MENT", " THIS", ".", " I", " do", " not", " do", " contract", " work", " /", " consulting", " services", ",", " but", " feel", " free", " to", " ask", " questions", " on", " Sp", "ig", "ot", " IRC", ".", "\n", "\n", "Tr", "acking", " that", " click", "\n", "\n", "First", " off", ",", " my", " system", " requires", " that", " all", " in", "bound", " campaigns", " need", " to", " land", " the", " user", " on", " the", " website", ".", " If", " someone", " see", "\ufffd", "\ufffd", "s", " your", " server", " connect", " address", " and", " connects", " directly", ",", " then", " you", " can", "\ufffd", "\ufffd", "t", " track", " that", " \u2013", " but", " hey", "!", " That", "\ufffd", "\ufffd", "s", " usually", " a", " FREE", " conversion", ",", " so", " don", "\ufffd", "\ufffd", "t", " complain", " \ud83d\ude42", "\n", "\n", "Here", " is", " an", " example", " database", " table", " that", " I", " use", ":", "\n", "\n", "CRE", "ATE", " TABLE", " `", "con", "versions", "`", " (", " `", "client", "id", "`", " v", "arch", "ar", "(", "255", ")", " CHAR", "AC", "TER", " SET", " lat", "in", "1", " NOT", " NULL", ",", " `", "con", "vert", "_", "id", "`", " v", "arch", "ar", "(", "255", ")", " CHAR", "AC", "TER", " SET", " lat", "in", "1", " NOT", " NULL", ",", " `", "ip", "`", " int", "(", "10", ")", " unsigned", " NOT", " NULL", ",", " `", "ua", "`", " v", "arch", "ar", "(", "255", ")", " CHAR", "AC", "TER", " SET", " lat", "in", "1", " DE", "FAULT", " NULL", ",", " `", "date", "`", " int", "(", "11", ")", " unsigned", " NOT", " NULL", ",", " `", "lp", "`", " text", " CHAR", "AC", "TER", " SET", " lat", "in", "1", ",", " `", "con", "verted", "`", " tiny", "int", "(", "4", ")", " unsigned", " NOT", " NULL", " DE", "FAULT", " '", "0", "'", " PR", "IM", "ARY", " KEY", " (", "`", "client", "id", "`", "),", " KEY", " `", "ip", "`", " (", "`", "ip", "`", "),", " KEY", " `", "con", "verted", "`", " (", "`", "con", "verted", "`", ")", " )", " ENG", "INE", "=", "In", "no", "DB", " DE", "FAULT", " CH", "ARS", "ET", "=", "utf", "8", ";", "\n", "\n", "our", " goal", " is", " to", " assign", " a", " Google", " Analytics", " Client", " Id", " to", " every", " user", ".", " Additionally", ",", " I", " assign", " a", " unique", " ID", " to", " every", " user", " separate", " to", " the", " client", " ID", ",", " as", " some", " users", " may", " have", " add", "ons", " that", " constantly", " change", " their", " Google", " Analytics", " Client", " ID", ",", " so", " this", " prevents", " inserting", " an", " entry", " into", " DB", " every", " time", " their", " client", " id", " changes", ".", "\n", "\n", "When", " a", " user", " comes", " in", " and", " has", " a", " Google", " Client", " ID", " set", ",", " assign", " them", " a", " convert", " ID", ".", " then", " insert", " an", " entry", " into", " the", " database", ".", "\n", "\n", "Ex", "plan", "ation", " of", " fields", ":", "\n", "\n", "client", "id", ":", " Google", " Analytics", " Client", " ID", "\n", "\n", "con", "vert", "_", "id", ":", " Field", " you", " generate", " to", " associate", " to", " a", " session", "\n", "\n", "ip", ":", " users", " IP", " address", " \u2013", " to", " be", " passed", " later", " to", " Google", " Analytics", " for", " conversion", " and", " match", " to", " a", " newly", " joined", " player", "\n", "\n", "ua", ":", " Users", " User", " Agent", " \u2013", " to", " be", " passed", " later", " to", " Google", " Analytics", " for", " conversion", "\n", "\n", "date", ":", " current", " time", " when", " seen", "\n", "\n", "lp", ":", " URL", " the", " player", " first", " landed", " on", " \u2013", " so", " you", " can", " know", " what", " web", " page", " they", " visited", ".", "\n", "\n", "con", "verted", ":", " has", " this", " record", " triggered", " a", " conversion", " not", ".", "\n", "\n", "So", ",", " once", " you", " have", " their", " IP", " and", " GA", " client", " ID", " tagged", " into", " the", " database", " off", " that", " first", " page", " load", "\u2026", " You", " got", " them", " \ud83d\ude42", " If", " they", " join", ",", " you", " will", " know", " what", " campaign", " they", " came", " from", ".", "\n", "\n", "Monitor", "ing", " Convers", "ions", "\n", "\n", "Now", " that", " you", " have", " them", " in", " the", " database", ",", " you", " need", " to", " have", " a", " monitoring", " system", " that", " checks", " your", " game", " server", ".", " This", " is", " the", " trick", "iest", " part", " of", " pulling", " this", " off", ",", " as", " how", " you", " do", " this", " will", " really", " vary", " based", " on", " your", " servers", " data", " infrastructure", ".", "\n", "\n", "We", " have", " a", " users", " database", " table", " that", " we", " can", " easily", " query", " on", " and", " find", " who", " has", " played", " in", " the", " past", " few", " hours", " and", " has", " not", " triggered", " conversion", " events", ".", " So", " we", " run", " a", " query", ",", " get", " the", " users", " IP", " address", ",", " and", " then", " look", " for", " matching", " conversion", " table", " entries", " on", " the", " same", " IP", " address", " that", " is", " also", " not", " marked", " as", " converted", ".", "\n", "\n", "In", " the", " event", " 2", " people", " joined", " on", " same", " IP", " from", " 2", " diff", " devices", ",", " you", " would", " have", " 2", " entries", " in", " the", " conversions", " table", ",", " and", " then", " each", " would", " match", " up", " to", " each", " other", ",", " still", " resulting", " in", " 2", " conversions", ".", " If", " 2", " accounts", " join", " but", " only", " 1", " device", " hit", " the", " website", ",", " then", " only", " 1", " conversion", " should", " be", " marked", " initially", ",", " but", " they", " are", " likely", " to", " then", " trigger", " a", " 2", "nd", " conversion", " event", " once", " they", " hit", " the", " website", " with", " a", " new", " device", " (", "that", " doesn", "\ufffd", "\ufffd", "t", " match", " the", " convert", "_", "id", " you", " generated", ").", "\n", "\n", "Now", "\u2026", " the", " actual", " marking", " of", " a", " conversion", " when", " this", " happens", "!", "\n", "\n", "Setting", " up", " your", " conversion", " event", "\n", "\n", "Now", " you", " need", " to", " configure", " Google", " Analytics", " to", " have", " a", " goal", " to", " count", " the", " conversions", ".", "\n", "\n", "Go", " to", " Admin", " >", " Your", " Property", " >", " Your", " Primary", " View", " >", " Goals", "\n", "\n", "Add", " a", " new", " Goal", " using", " an", " Event", " like", " so", ":", "\n", "\n", "This", " step", " doesn", "\ufffd", "\ufffd", "t", " have", " to", " be", " done", " first", ",", " but", " it", " does", " need", " to", " be", " done", " to", " view", " it", " and", " there", "\ufffd", "\ufffd", "s", " no", " benefit", " to", " do", " it", " after", " rather", " than", " before", ".", "\n", "\n", "Google", " Analytics", " Measure", "ment", " Protocol", "\n", "\n", "The", " way", " the", " Google", " Analytics", " tracking", " system", " works", " is", " extensively", " documented", ",", " and", " even", " encouraged", " for", " you", " to", " do", " your", " own", " backend", " server", " side", " reporting", " of", " the", " event", " on", " behalf", " of", " the", " user", "!", "\n", "\n", "Read", " all", " the", " documentation", ":", " Google", " Analytics", " Measure", "ment", " Protocol", ".", "\n", "\n", "Now", " we", "\ufffd", "\ufffd", "ve", " got", " a", " list", " of", " rows", " from", " the", " conversion", " table", " of", " who", " joined", " the", " game", " server", ",", " with", " their", " GA", " Client", " Id", " IP", " and", " URL", ".", "\n", "\n", "Now", " your", " backend", " monitoring", " system", " needs", " to", " call", " out", " to", " Google", " Analytics", " in", " the", " exact", " same", " fashion", " the", " client", " browsers", " do", ",", " but", " I", "\ufffd", "\ufffd", "ll", " save", " you", " the", " trouble", ",", " here", " is", " the", " code", " I", " use", " to", " do", " this", ":", "\n", "\n", "404", ":", " Not", " Found", "\n", "\n", "I", " do", " even", " further", " events", " like", " Day", " 5", "/", "15", "/", "30", "/", "60", "/", "90", " tracking", ",", " so", " I", " pass", " in", " other", " events", " for", " those", ".", " To", " support", " that", " type", " of", " data", ",", " you", " will", " have", " to", " analyze", " your", " data", " and", " figure", " out", " the", " best", " way", " to", " compute", " who", " should", " be", " converted", " for", " those", " cases", ".", "\n", "\n", "T", "agging", " Every", " In", "bound", " Link", "\n", "\n", "Now", " you", " have", " the", " infrastructure", " set", " up", ",", " you", " need", " to", " ensure", " every", " direct", " campaign", " you", " control", " is", " tagged", "!", " This", " involves", " setting", " ut", "m", "_", "*", " parameters", " on", " your", " in", "bound", " links", ".", "\n", "\n", "Learn", " more", " about", " U", "TM", " Parameters", "\n", "\n", "I", " personally", " use", " our", " em", "c", ".", "gs", " url", " short", "ner", ",", " then", " create", " links", " that", " redirect", " to", " pages", " with", " the", " ut", "m", " parameters", ",", " so", " that", " I", " can", " do", " \ufffd", "\ufffd", "reddit", ".", "em", "c", ".", "gs", "\ufffd", "\ufffd", " and", " it", " will", " tag", " that", " link", " with", " the", " Reddit", " tracking", " parameters", ".", " If", " you", " want", " to", " set", " up", " a", " url", " short", "ener", " like", " we", " have", ",", " check", " out", " Your", "LS", ".", "\n", "\n", "I", " have", " modified", " it", " for", " our", " needs", " though", ",", " making", " it", " so", " &", "g", "ac", " =", " &", "utm", "_", "campaign", ",", " &", "gas", " =", " &", "utm", "_", "source", " and", " &", "gam", " =", " &", "utm", "_", "medium", " for", " quick", " changes", " of", " properties", " like", " reddit", ".", "em", "c", ".", "gs", "/?", "gam", "=", "ad", "-", "4", "\n", "\n", "I", " suggest", " setting", " up", " a", " redirect", " system", " on", " your", " main", " website", " domain", " and", " not", " an", " alternate", " domain", " like", " we", " do", ",", " because", " many", " advertising", " systems", " dislike", " domain", " mism", "atches", ",", " and", " we", " had", " to", " set", " up", " empire", "minecraft", ".", "com", "/", "go", "/", "foo", " to", " redirect", " to", " em", "c", ".", "gs", "/", "foo", " which", " then", " redirect", "s", " back", " to", " the", " target", " of", " em", "c", ".", "gs", "/", "foo", " just", " to", " trick", " some", " of", " those", " platforms", ".", "\n", "\n", "Enjoy", " having", " data", " about", " your", " campaigns", " and", " who", " sends", " you", " the", " best", " traffic", " \ud83d\ude42", "\n", "\n", "Share", " this", ":", " Facebook", "\n", "\n", "Reddit", "\n", "\n", "Twitter", "\n", "\n", "More", "\n", "\n", "Pinterest", "\n", "\n", "Pocket", "\n\n", "\n", "\n", "Wh", "ats", "App", "\n", "\n", "LinkedIn", "\n\n", "\n", "\n", "Email", "\n", "\n", "Sky", "pe", "\n\n", "\n", "\n", "Tumblr", "\n", "\n", "Te", "legram", "\n\n", "\n", "\n", "Print", "\n\n"]