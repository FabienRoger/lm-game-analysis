["The", " second", " Virtual", "J", "UG", " session", " in", " August", " saw", " Gle", "b", " Sm", "ir", "nov", " give", " his", " first", " session", " on", " the", " v", "J", "UG", " with", " a", " hardcore", " technical", " look", " at", " conc", "urrency", " with", " \ufffd", "\ufffd", "Java", " Conc", "urrency", " Under", " the", " Co", "vers", "\ufffd", "\ufffd", ".", " And", " ye", "h", ",", " we", " went", " deep", " under", " the", " covers", "!", " In", " the", " session", " Gle", "b", " looks", " at", " conc", "urrency", " issues", " and", " why", " we", " need", " a", " Java", " Memory", " Model", ".", " Inc", "identally", ",", " the", " v", "J", "UG", " also", " had", " a", " chance", " to", " learn", " about", " the", " Java", " Memory", " Model", " from", " Ale", "k", "sey", " Ship", "ile", "v", " earlier", " in", " the", " year", ".", " You", " can", " catch", " up", " with", " that", " session", " and", " read", " what", " we", " learned", " from", " it", " in", " a", " write", " up", " and", " a", " full", " replay", " on", " Rebel", "L", "abs", ".", "\n", "\n", "Below", " is", " the", " full", " video", " of", " Gle", "b", "\ufffd", "\ufffd", "s", " session", " for", " your", " convenience", ".", " If", " you", " don", "\ufffd", "\ufffd", "t", " have", " time", " to", " view", " it", " all", ",", " scroll", " down", " and", " we", "\ufffd", "\ufffd", "ll", " give", " you", " our", " TL", ";", "DR", " version", "!", "\n\n", "\n\n", "\n", "\n", "G", "le", "b", " started", " with", " an", " excellent", " summary", " of", " what", "\ufffd", "\ufffd", "s", " often", " referred", " to", " as", " Mechanical", " Sy", "mp", "athy", ".", " The", " idea", " being", ",", " you", " must", " understand", " the", " underlying", " technology", " in", " order", " to", " build", " on", " top", " of", " it", " proficient", "ly", ".", " Martin", " Thompson", ",", " a", " big", " fan", " of", " mechanical", " sympathy", ",", " refers", " to", " it", " as", " a", " formula", " 1", " racing", " driver", " understanding", " their", " car", ".", " They", " don", "\ufffd", "\ufffd", "t", " need", " to", " know", " the", " exact", " mechanics", " of", " the", " car", " and", " precisely", " how", " it", " works", ",", " but", " if", " they", " have", " a", " reasonable", " working", " knowledge", " they", " will", " be", " able", " to", " get", " more", " out", " of", " the", " car", " when", " driving", " it", ".", " Similarly", ",", " as", " a", " developer", ",", " it", "\ufffd", "\ufffd", "s", " important", " to", " understand", " the", " underlying", " Java", " Memory", " Model", ",", " or", " how", " hardware", " uses", " its", " cores", " to", " give", " you", " a", " better", " understanding", " of", " how", " your", " code", " is", " actually", " going", " to", " execute", ".", "\n", "\n", "G", "le", "b", " starts", " with", " a", " simple", " bit", " of", " code", " and", " simply", " asks", " the", " question", ",", " can", " the", " assertion", " in", " this", " code", " fail", "?", " How", " about", " if", " it", " were", " run", " on", " the", " x", "86", " architecture", "?", " What", " if", " the", " architecture", " is", " different", "?", " The", " code", " Gle", "b", " showed", " is", " below", ".", "\n", "\n", "The", " theoretical", " answer", " lays", " in", " the", " Java", " Memory", " Model", ".", " The", " J", "MM", " says", " you", " need", " the", " volatile", " keyword", " on", " the", " finished", " keyword", " to", " be", " assured", " the", " assertion", " succeeds", ".", " As", " we", " know", " of", " course", " the", " theoretical", " answer", " is", " the", " sober", " relative", " of", " the", " drunken", " real", " life", " in", " which", " practice", " lives", " in", ".", " Gle", "b", " takes", " a", " glimpse", " into", " the", " practical", " world", " and", " runs", " the", " code", " an", " extreme", " amount", " of", " times", " to", " see", " how", " many", " times", " the", " assertion", " fails", ",", " using", " a", " tool", " called", " j", "c", "stress", ".", " Well", " actually", " it", " wasn", "\ufffd", "\ufffd", "t", " exactly", " the", " same", " but", " it", " was", " very", " similar", ".", " Essentially", " it", " did", " some", " writes", " and", " reads", " and", " the", " question", " was", ",", " would", " they", " be", " in", " order", ".", " Oh", " heck", ",", " I", " might", " as", " well", " just", " show", " you", " the", " code", "!", "\n", "\n", "int", " value", ";", " int", " finished", ";", " @", "Actor", " public", " void", " actor", "1", "()", " {", " value", " =", " 1", ";", " value", " =", " 2", ";", " finished", " =", " 1", ";", " value", " =", " 3", ";", " }", " @", "Actor", " public", " void", " actor", "2", "(", "Int", "Result", "2", " r", ")", " {", " int", " sy", " =", " finished", ";", " int", " s", "x", " =", " value", ";", " r", ".", "r", "1", " =", " sy", ";", " r", ".", "r", "2", " =", " s", "x", ";", " }", "\n", "\n", "So", " in", " this", " instance", ",", " we", " would", " expect", " (", "na", "ively", ")", " that", " the", " actor", "2", " method", " could", " never", " see", " finished", " as", " 1", " and", " value", " as", " 0", ",", " or", " finished", " as", " 1", " and", " value", " as", " 1", ".", " The", " reason", " is", " of", " course", " because", " if", " the", " lines", " in", " actor", "1", " were", " invoked", " sequ", "entially", ",", " these", " should", " not", " be", " possible", " combinations", ".", " Well", ",", " given", " what", " we", "\ufffd", "\ufffd", "ve", " already", " said", ",", " you", "\ufffd", "\ufffd", "ll", " not", " be", " surprised", " to", " hear", " that", " Gle", "b", " does", " show", " a", " number", " of", " cases", " where", " finished", " is", " 0", " and", " value", " is", " 3", " as", " well", " as", " finished", " being", " 1", " and", " value", " being", " 0", ",", " albeit", " a", " small", " number", ",", " it", " is", " possible", ".", "\n", "\n", "Why", " does", " this", " happen", "?", " Well", ",", " because", " of", " optimizations", " at", " every", " layer", ",", " that", " doesn", "\ufffd", "\ufffd", "t", " intend", " to", " change", " behaviour", ",", " but", " can", " do", " so", ".", " Gle", "b", " uses", " Cache", " Co", "he", "rency", " as", " an", " example", " of", " this", ".", " He", " explains", " a", " multi", "-", "processor", " scenario", " which", " each", " holds", " a", " cache", " of", " 2", " variables", ",", " finished", " and", " value", ",", " as", " shown", " below", ".", "\n", "\n", "Now", ",", " if", " we", " send", " an", " instruction", " to", " set", " the", " variable", " called", " value", " to", " 10", ",", " this", " might", " go", " to", " the", " first", " CPU", ".", " This", " CPU", " would", " send", " an", " instruction", " to", " the", " second", " CPU", " to", " tell", " it", " to", " invalid", "ate", " its", " value", " variable", ".", " That", " takes", " time", " to", " communicate", " and", " run", ",", " so", " before", " we", " then", " make", " a", " call", " to", " set", " the", " finished", " variable", " to", " true", ",", " we", "\ufffd", "\ufffd", "re", " already", " late", "!", " The", " underlying", " layers", " might", " choose", " to", " run", " the", " calls", " as", "ynchron", "ously", ",", " both", " for", " setting", " the", " finished", " and", " value", " variables", ".", " Uh", " oh", ",", " did", " someone", " say", " asynchronous", "?", " Dragons", " be", " there", "!", " This", " uncertainty", " is", " the", " reason", " as", " to", " why", " the", " Java", " Memory", " Model", " exists", " and", " why", " such", " an", " exciting", " and", " enticing", " specification", " might", " exist", ".", "\n", "\n", "A", " little", " later", ",", " Gle", "b", " goes", " much", " much", " further", " under", " the", " covers", ".", " So", " far", " in", " fact", " it", "\ufffd", "\ufffd", "s", " hard", " to", " even", " look", " back", " and", " even", " see", " the", " covers", "!", " He", " first", " adds", " the", " volatile", " keyword", " to", " the", " finished", " variable", " in", " the", " previous", " code", " example", " and", " comp", "iles", " it", ".", " When", " we", " look", " at", " the", " class", " file", " using", " a", " regular", " j", "av", "ap", " operation", ",", " we", " see", " the", " put", "field", " and", " get", "field", " operations", " in", " the", " byte", "code", " in", " each", " of", " the", " methods", " as", " shown", " below", ".", "\n", "\n", "G", "le", "b", " then", " navig", "ates", " through", " the", " j", "dk", " source", " code", " to", " track", " down", " the", " put", "field", " operation", " usage", ".", " He", " finds", " some", " interesting", " code", " in", " the", " Graph", "Builder", ".", "cpp", " file", " which", " uses", " put", "field", ".", " OMG", ",", ".", "cpp", "!", " Yeah", ",", " now", " we", "\ufffd", "\ufffd", "re", " under", " the", " covers", " alright", "!", " De", "eper", " through", " the", " code", ",", " Gle", "b", " digs", " further", " to", " notice", " a", " call", " which", " checks", " if", " the", " field", " references", " is", " volatile", " or", " not", " and", " shows", " the", " additional", " actions", " which", " occur", " as", " a", " result", ",", " including", " a", " call", " to", " add", " a", " mem", "bar", " release", ".", " At", " this", " stage", ",", " it", "\ufffd", "\ufffd", "s", " better", " to", " watch", " the", " video", " and", " watch", " Gle", "b", " navigate", " through", " the", " code", " rather", " than", " read", " about", " it", ".", "\n", "\n", "Go", " watch", " the", " session", ",", " it", "\ufffd", "\ufffd", "s", " educational", ",", " technical", " and", " inspiring", "!", "\n", "\n", "Spe", "aker", " Interview", "\n", "\n", "As", " O", "leg", " is", " still", " out", " in", " the", " forest", " learning", " about", " natural", " language", " processing", ",", " I", " had", " the", " pleasure", " of", " interviewing", " Gle", "b", " as", " well", " this", " week", "!", " Here", "\ufffd", "\ufffd", "s", " our", " interview", ",", " enjoy", "!", "\n\n", "\n\n", "\n", "\n", "That", " was", " a", " good", " write", " up", ",", " right", "?", " Well", " you", " must", " have", " enjoyed", " it", ",", " otherwise", " you", " wouldn", "\ufffd", "\ufffd", "t", " have", " got", " this", " far", "!", " Why", " not", " subscribe", " to", " our", " feed", " and", " we", "\ufffd", "\ufffd", "ll", " send", " you", " more", " great", " content", " as", " quick", " as", " we", " write", " it", "!", " Enter", " your", " email", " below", " to", " join", " our", " Rebel", "L", "abs", " community", "."]