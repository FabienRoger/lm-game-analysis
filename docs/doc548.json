["Every", " Christmas", " Eve", ",", " my", " family", " watches", " Love", " Actually", ".", " Object", "ively", " it", "\ufffd", "\ufffd", "s", " not", " a", " particularly", ",", " er", ",", " good", " movie", ",", " but", " it", "\ufffd", "\ufffd", "s", " well", "-", "su", "ited", " for", " a", " holiday", " tradition", ".", " (", "V", "ox", " has", " got", " my", " back", " here", ").", "\n", "\n", "Even", " on", " the", " eighth", " or", " ninth", " viewing", ",", " it", "\ufffd", "\ufffd", "s", " impressive", " what", " an", " intricate", " network", " of", " characters", " it", " builds", ".", " This", " got", " me", " wondering", " how", " we", " could", " visualize", " the", " connections", " quant", "itatively", ",", " based", " on", " how", " often", " characters", " share", " scenes", ".", " So", " last", " night", ",", " while", " my", " family", " was", " watching", " the", " movie", ",", " I", " loaded", " up", " R", "Studio", ",", " downloaded", " a", " transcript", ",", " and", " started", " analyzing", ".", "\n", "\n", "P", "ars", "ing", "\n", "\n", "It", "\ufffd", "\ufffd", "s", " easy", " to", " use", " R", " to", " parse", " the", " raw", " script", " into", " a", " data", " frame", ",", " using", " a", " combination", " of", " d", "ply", "r", ",", " string", "r", ",", " and", " tid", "yr", ".", " (", "For", " legal", " reasons", " I", " don", "\ufffd", "\ufffd", "t", " want", " to", " host", " the", " script", " file", " myself", ",", " but", " it", "\ufffd", "\ufffd", "s", " literally", " the", " first", " Google", " result", " for", " \ufffd", "\ufffd", "Love", " Actually", " script", ".", "\ufffd", "\ufffd", " Just", " copy", " the", ".", "doc", " contents", " into", " a", " text", " file", " called", " love", "_", "actually", ".", "txt", " ).", "\n", "\n", "library", " (", " d", "ply", "r", " )", " library", " (", " string", "r", " )", " library", " (", " tid", "yr", " )", " raw", " <-", " read", "L", "ines", " (", " \"", "love", "_", "actually", ".", "txt", "\"", " )", " lines", " <-", " data", "_", "frame", " (", " raw", " =", " raw", " )", " %", ">", "%", " filter", " (", " raw", "!=", " \"\"", ",", "!", " str", "_", "det", "ect", " (", " raw", ",", " \"(", "song", ")\"", " ))", " %", ">", "%", " mut", "ate", " (", " is", "_", "scene", " =", " str", "_", "det", "ect", " (", " raw", ",", " \"", " Scene", " \"", " ),", " scene", " =", " c", "ums", "um", " (", " is", "_", "scene", " ))", " %", ">", "%", " filter", " (", "!", " is", "_", "scene", " )", " %", ">", "%", " separate", " (", " raw", ",", " c", " (", " \"", "spe", "aker", "\"", ",", " \"", "dial", "ogue", "\"", " ),", " sep", " =", " \"", ":\"", ",", " fill", " =", " \"", "left", "\"", " )", " %", ">", "%", " group", "_", "by", " (", " scene", ",", " line", " =", " c", "ums", "um", " (", "!", " is", ".", "na", " (", " speaker", " )))", " %", ">", "%", " summarize", " (", " speaker", " =", " speaker", " [", " 1", " ],", " dialogue", " =", " str", "_", "c", " (", " dialogue", ",", " collapse", " =", " \"", " \"", " ))", "\n", "\n", "I", " also", " set", " up", " a", " CSV", " file", " matching", " characters", " to", " their", " actors", ",", " which", " you", " can", " read", " in", " separately", ".", " (", "I", " chose", " 20", " characters", " that", " have", " notable", " roles", " in", " the", " story", ").", "\n", "\n", "cast", " <-", " read", ".", "csv", " (", " url", " (", " \"", "http", "://", "vari", "ance", "expl", "ained", ".", "org", "/", "files", "/", "love", "_", "actually", "_", "cast", ".", "csv", "\"", " ))", " lines", " <-", " lines", " %", ">", "%", " inner", "_", "join", " (", " cast", " )", " %", ">", "%", " mut", "ate", " (", " character", " =", " paste", "0", " (", " speaker", ",", " \"", " (\"", ",", " actor", ",", " \"", ")\"", " ))", "\n", "\n", "Now", " we", " have", " a", " tidy", " data", " frame", " with", " one", " row", " per", " line", ",", " along", " with", " columns", " describing", " the", " scene", " number", " and", " characters", ":", "\n", "\n", "From", " here", " it", "\ufffd", "\ufffd", "s", " easy", " to", " count", " the", " lines", "-", "per", "-", "scene", "-", "per", "-", "character", ",", " and", " to", " turn", " it", " into", " a", " binary", " speaker", "-", "by", "-", "scene", " matrix", ".", "\n", "\n", "by", "_", "spe", "aker", "_", "scene", " <-", " lines", " %", ">", "%", " count", " (", " scene", ",", " character", " )", " by", "_", "spe", "aker", "_", "scene", "\n", "\n", "##", " Source", ":", " local", " data", " frame", " [", "162", " x", " 3", "]", " ##", " Groups", ":", " scene", " [", "?]", " ##", " ##", " scene", " character", " n", " ##", " (", "int", ")", " (", "ch", "r", ")", " (", "int", ")", " ##", " 1", " 2", " Billy", " (", "Bill", " N", "igh", "y", ")", " 5", " ##", " 2", " 2", " Joe", " (", "Greg", "or", " Fisher", ")", " 3", " ##", " 3", " 3", " Jamie", " (", "Col", "in", " F", "irth", ")", " 5", " ##", " 4", " 4", " Daniel", " (", "L", "iam", " N", "ees", "on", ")", " 3", " ##", " 5", " 4", " Karen", " (", "Em", "ma", " Thompson", ")", " 6", " ##", " 6", " 5", " Colin", " (", "K", "ris", " Marshall", ")", " 4", " ##", " 7", " 6", " Jack", " (", "Martin", " Freeman", ")", " 2", " ##", " 8", " 6", " Judy", " (", "Jo", "anna", " Page", ")", " 1", " ##", " 9", " 7", " Mark", " (", "Andrew", " Lincoln", ")", " 4", " ##", " 10", " 7", " Peter", " (", "Ch", "iw", "et", "el", " E", "j", "io", "for", ")", " 4", " ##", "..", "...", "...", "...", "\n", "\n", "library", " (", " resh", "ape", "2", " )", " speaker", "_", "scene", "_", "mat", "rix", " <-", " by", "_", "spe", "aker", "_", "scene", " %", ">", "%", " ac", "ast", " (", " character", " ~", " scene", ",", " fun", ".", "agg", "regate", " =", " length", " )", " dim", " (", " speaker", "_", "scene", "_", "mat", "rix", " )", "\n", "\n", "##", " [", "1", "]", " 20", " 76", "\n", "\n", "Now", " we", " can", " get", " to", " the", " interesting", " stuff", "!", "\n", "\n", "Analysis", "\n", "\n", "Whenever", " we", " have", " a", " matrix", ",", " it", "\ufffd", "\ufffd", "s", " worth", " trying", " to", " cluster", " it", ".", " Let", "\ufffd", "\ufffd", "s", " start", " with", " hierarchical", " clust", "ering", ".", "\n", "\n", "norm", " <-", " speaker", "_", "scene", "_", "mat", "rix", " /", " row", "S", "ums", " (", " speaker", "_", "scene", "_", "mat", "rix", " )", " h", " <-", " h", "cl", "ust", " (", " dist", " (", " norm", ",", " method", " =", " \"", "man", "hattan", "\"", " ))", " plot", " (", " h", " )", "\n", "\n", "This", " looks", " about", " right", "!", " Almost", " all", " the", " romantic", " pairs", " are", " together", " (", "Nat", "alia", "/", "PM", ";", " Aure", "lia", "/", "Jamie", ",", " Harry", "/", "K", "aren", ";", " Karl", "/", "Sarah", ";", " Juliet", "/", "Peter", ";", " Jack", "/", "Jud", "y", ")", " as", " are", " the", " friends", " (", "Col", "in", "/", "Tony", ";", " Billy", "/", "Joe", ")", " and", " family", " (", "Daniel", "/", "Sam", ").", "\n", "\n", "One", " thing", " this", " tree", " is", " perfect", " for", " is", " giving", " an", " ordering", " that", " puts", " similar", " characters", " close", " together", ":", "\n", "\n", "ordering", " <-", " h", " $", " labels", " [", " h", " $", " order", " ]", " ordering", "\n", "\n", "##", " [", "1", "]", " \"", "N", "atalie", " (", "Mart", "ine", " McC", "ut", "cheon", ")\"", " \"", "PM", " (", "H", "ugh", " Grant", ")\"", " ##", " [", "3", "]", " \"", "A", "ure", "lia", " (", "L", "\u00fa", "cia", " Mon", "iz", ")\"", " \"", "Jamie", " (", "Col", "in", " F", "irth", ")\"", " ##", " [", "5", "]", " \"", "Daniel", " (", "L", "iam", " N", "ees", "on", ")\"", " \"", "Sam", " (", "Thomas", " Sang", "ster", ")\"", " ##", " [", "7", "]", " \"", "Jack", " (", "Martin", " Freeman", ")\"", " \"", "Jud", "y", " (", "Jo", "anna", " Page", ")\"", " ##", " [", "9", "]", " \"", "Col", "in", " (", "K", "ris", " Marshall", ")\"", " \"", "Tony", " (", "Ab", "d", "ul", " Sal", "is", ")\"", " ##", " [", "11", "]", " \"", "Billy", " (", "Bill", " N", "igh", "y", ")\"", " \"", "Joe", " (", "Greg", "or", " Fisher", ")\"", " ##", " [", "13", "]", " \"", "Mark", " (", "Andrew", " Lincoln", ")\"", " \"", "Jul", "iet", " (", "Ke", "ira", " Knight", "ley", ")\"", " ##", " [", "15", "]", " \"", "Peter", " (", "Ch", "iw", "et", "el", " E", "j", "io", "for", ")\"", " \"", "Karl", " (", "Rod", "rig", "o", " Sant", "oro", ")\"", " ##", " [", "17", "]", " \"", "Sarah", " (", "Laura", " Lin", "ney", ")\"", " \"", "M", "ia", " (", "He", "ike", " Mak", "ats", "ch", ")\"", " ##", " [", "19", "]", " \"", "Harry", " (", "Alan", " Rick", "man", ")\"", " \"", "K", "aren", " (", "Em", "ma", " Thompson", ")\"", "\n", "\n", "This", " ordering", " can", " be", " used", " to", " make", " other", " graphs", " more", " informative", ".", " For", " instance", ",", " we", " can", " visualize", " a", " timeline", " of", " all", " scenes", ":", "\n", "\n", "scenes", " <-", " by", "_", "spe", "aker", "_", "scene", " %", ">", "%", " filter", " (", " n", " ()", " >", " 1", " )", " %", ">", "%", " #", " scenes", " with", " >", " 1", " character", " un", "group", " ()", " %", ">", "%", " mut", "ate", " (", " scene", " =", " as", ".", "n", "umeric", " (", " factor", " (", " scene", " )", "),", " character", " =", " factor", " (", " character", ",", " levels", " =", " ordering", " ))", " g", "g", "plot", " (", " scenes", ",", " a", "es", " (", " scene", ",", " character", " ))", " +", " ge", "om", "_", "point", " ()", " +", " ge", "om", "_", "path", " (", " a", "es", " (", " group", " =", " scene", " ))", "\n", "\n", "If", " you", "\ufffd", "\ufffd", "ve", " seen", " the", " film", " as", " many", " times", " as", " I", " have", " (", "you", " haven", "\ufffd", "\ufffd", "t", "),", " you", " can", " stare", " at", " this", " graph", " and", " the", " film", "\ufffd", "\ufffd", "s", " scenes", " spring", " out", ",", " like", " notes", " engraved", " in", " vinyl", ".", "\n", "\n", "One", " reason", " it", "\ufffd", "\ufffd", "s", " good", " to", " lay", " out", " raw", " data", " like", " this", " (", "as", " opposed", " to", " processed", " metrics", " like", " distances", ")", " is", " that", " anomalies", " stand", " out", ".", " For", " instance", ",", " look", " at", " the", " last", " scene", ":", " it", "\ufffd", "\ufffd", "s", " the", " \ufffd", "\ufffd", "c", "oda", "\ufffd", "\ufffd", " at", " the", " airport", " that", " includes", " 15", " (", "!)", " characters", ".", " If", " we", "\ufffd", "\ufffd", "re", " going", " to", " plot", " this", " as", " a", " network", " (", "and", " we", " totally", " are", "!)", " we", "\ufffd", "\ufffd", "ve", " got", " to", " ignore", " that", " scene", ",", " or", " else", " it", " looks", " like", " almost", " everyone", " is", " connected", " to", " everyone", " else", ".", "\n", "\n", "After", " that", ",", " we", " can", " create", " a", " co", "occ", "ure", "nce", " matrix", " (", "see", " here", ")", " containing", " how", " many", " times", " two", " characters", " share", " scenes", ":", "\n", "\n", "non", "_", "air", "port", "_", "scenes", " <-", " speaker", "_", "scene", "_", "mat", "rix", " [", ",", " col", "S", "ums", " (", " speaker", "_", "scene", "_", "mat", "rix", " )", " <", " 10", " ]", " co", "occ", "ur", " <-", " non", "_", "air", "port", "_", "scenes", " %", "*", "%", " t", " (", " non", "_", "air", "port", "_", "scenes", " )", " heat", "map", " (", " co", "occ", "ur", " )", "\n", "\n", "This", " gives", " us", " a", " sense", " of", " how", " the", " clust", "ering", " in", " the", " above", " graph", " occurred", ".", " We", " can", " then", " use", " the", " ig", "raph", " package", " to", " plot", " the", " network", ".", "\n", "\n", "library", " (", " ig", "raph", " )", " g", " <-", " graph", ".", "ad", "jac", "ency", " (", " co", "occ", "ur", ",", " weighted", " =", " TRUE", ",", " mode", " =", " \"", "und", "irect", "ed", "\"", ",", " di", "ag", " =", " FALSE", " )", " plot", " (", " g", ",", " edge", ".", "width", " =", " E", " (", " g", " )", " $", " weight", " )", "\n", "\n", "A", " few", " patterns", " pop", " out", " of", " this", " visualization", ".", " We", " see", " that", " the", " majority", " of", " characters", " are", " tightly", " connected", " (", "often", " by", " the", " scenes", " at", " the", " school", " play", ",", " or", " by", " Karen", " (", "Em", "ma", " Thompson", "),", " who", " is", " friends", " or", " family", " to", " many", " key", " characters", ").", " But", " we", " see", " Bill", " N", "igh", "y", "\ufffd", "\ufffd", "s", " plot", "line", " occurs", " almost", " entirely", " separate", " from", " everyone", " else", ",", " and", " that", " five", " other", " characters", " are", " linked", " to", " the", " main", " network", " by", " only", " a", " single", " thread", " (", "Sarah", "\ufffd", "\ufffd", "s", " conversation", " with", " Mark", " at", " the", " wedding", ").", "\n", "\n", "One", " interesting", " aspect", " of", " this", " data", " is", " that", " this", " network", " builds", " over", " the", " course", " of", " the", " movie", ",", " growing", " nodes", " and", " connections", " as", " characters", " and", " relationships", " are", " introduced", ".", " There", " are", " a", " few", " ways", " to", " show", " this", " evolving", " network", " (", "such", " as", " an", " animation", "),", " but", " I", " decided", " to", " make", " it", " an", " interactive", " Shiny", " app", ",", " which", " lets", " the", " user", " specify", " the", " scene", " and", " shows", " the", " network", " that", " the", " movie", " has", " built", " up", " to", " that", " point", ".", "\n", "\n", "(", "You", " can", " view", " the", " code", " for", " the", " Shiny", " app", " on", " GitHub", ").", "\n", "\n", "Data", " Actually", "\n", "\n", "Have", " you", " heard", " the", " complaint", " that", " we", " are", " \ufffd", "\ufffd", "d", "rown", "ing", " in", " data", "\ufffd", "\ufffd", "?", " How", " about", " the", " horror", " stories", " about", " how", " no", " one", " understands", " statistics", ",", " and", " we", " need", " trained", " statistic", "ians", " as", " the", " \ufffd", "\ufffd", "police", "\ufffd", "\ufffd", " to", " keep", " people", " from", " mis", "inter", "pre", "ting", " their", " methods", "?", " It", " sure", " makes", " data", " science", " sound", " like", " important", ",", " d", "re", "ary", " work", ".", "\n", "\n", "Whenever", " I", " get", " gloomy", " about", " those", " topics", ",", " I", " try", " to", " spend", " a", " little", " time", " on", " silly", " projects", " like", " this", ",", " which", " remind", " me", " why", " I", " learned", " statistical", " programming", " in", " the", " first", " place", ".", " It", " took", " minutes", " to", " download", " a", " movie", " script", " and", " turn", " it", " into", " usable", " data", ",", " and", " within", " a", " few", " hours", ",", " I", " was", " able", " to", " see", " the", " movie", " in", " a", " new", " way", ".", " We", "\ufffd", "\ufffd", "re", " living", " in", " a", " wonderful", " world", ":", " one", " with", " powerful", " tools", " like", " R", " and", " Shiny", ",", " and", " one", " overflowing", " with", " resources", " that", " are", " just", " a", " Google", " search", " away", ".", "\n", "\n", "Maybe", " you", " don", "\ufffd", "\ufffd", "t", " like", " \ufffd", "\ufffd", "Love", " Actually", "\ufffd", "\ufffd", ";", " you", " like", " Star", " Wars", ".", " Or", " you", " like", " baseball", ",", " or", " you", " like", " comparing", " programming", " languages", ".", " Or", " you", "\ufffd", "\ufffd", "re", " interested", " in", " dating", ",", " or", " hip", " hop", ".", " Whatever", " questions", " you", "\ufffd", "\ufffd", "re", " interested", " in", ",", " the", " answers", " are", " just", " a", " search", " and", " a", " script", " away", ".", " If", " you", " look", " for", " it", ",", " I", "\ufffd", "\ufffd", "ve", " got", " a", " sneaky", " feeling", " you", "\ufffd", "\ufffd", "ll", " find", " that", " data", " actually", " is", " all", " around", " us", "."]