["G", "CC", " C", "++", " C", "oding", " Con", "ventions", "\n", "\n", "Status", " as", " of", " 2012", "-", "08", "-", "16", ":", " The", " C", "++", " coding", " conventions", " for", " GCC", " have", " been", " approved", ".", " The", " contents", " of", " this", " page", " are", " now", " obsolete", ".", " Please", " visit", " the", " official", " GCC", " C", "oding", " Con", "ventions", " page", " for", " details", ".", "\n", "\n", "This", " is", " a", " proposed", " set", " of", " coding", " conventions", " to", " be", " used", " when", " writing", " GCC", " in", " C", "++", ".", " The", " intention", " is", " to", " develop", " this", " on", " the", " wiki", ",", " and", " move", " them", " to", " http", "://", "g", "cc", ".", "gnu", ".", "org", "/", "c", "oding", "con", "ventions", ".", "html", " when", " they", " are", " stable", ".", "\n", "\n", "For", " some", " additional", " background", " information", ",", " please", " see", " RFC", ":", "Sw", "itching", " implementation", " language", " to", " C", "++", "\n", "\n", "General", " Guidelines", "\n", "\n", "C", "++", " code", " must", " conform", " to", " the", " C", "++", "03", " standard", ",", " with", " the", " addition", " that", " the", " long", " long", " type", " may", " be", " used", " if", " the", " host", " C", "++", " compiler", " supports", " it", ".", " (", "The", " treatment", " of", " long", " long", " remains", " the", " same", " as", " it", " is", " today", ".)", " In", " addition", ",", " C", "++", " code", " should", " conform", " to", " the", " C", "++", "11", " standard", ".", " Select", " adaptation", " macros", " can", " enable", " exploiting", " some", " features", " of", " C", "++", "11", " while", " still", " preserving", " correct", " C", "++", "03", ".", "\n", "\n", "Every", " version", " of", " GCC", " must", " be", " build", "able", " by", " the", " previous", " version", " of", " GCC", ".", " This", " rule", " helps", " ensure", " smooth", " development", " of", " the", " next", " version", ".", " However", ",", " it", " doesn", "'t", " help", " so", " much", " when", " you", " do", " not", " have", " a", " previous", " version", ".", " So", ",", " the", " more", " important", " rule", " is", " that", " every", " version", " must", " boot", "strap", ",", " which", " means", " that", " version", " can", " develop", " itself", ".", " Note", " that", " this", " statement", " does", " not", " preclude", " a", " need", " to", " build", " GCC", " with", " other", " comp", "ilers", ".", "\n", "\n", "We", " will", " periodically", " pick", " a", " stable", " version", " of", " GCC", ",", " and", " require", " that", " that", " version", " of", " GCC", " be", " able", " to", " build", " all", " versions", " of", " GCC", " up", " to", " and", " including", " the", " next", " stable", " version", ".", " E", ".", "g", ".,", " we", " may", " decide", " that", " all", " newer", " versions", " of", " GCC", " should", " be", " build", "able", " with", " GCC", " 4", ".", "3", ".", "5", ".", "\n", "\n", "It", " is", " desirable", " that", " it", " be", " possible", " to", " build", " GCC", " with", " C", "++", " comp", "ilers", " other", " than", " GCC", " itself", ".", " If", " testing", " reveals", " that", " reasonably", " recent", " versions", " of", " non", "-", "G", "CC", " C", "++", " comp", "ilers", " cannot", " compile", " GCC", ",", " then", " GCC", " code", " should", " be", " adjusted", " accordingly", ".", " (", "Avoid", "ing", " unusual", " language", " constructs", " helps", " immensely", ".)", "\n", "\n", "Support", "ing", " libraries", " such", " as", " lib", "iber", "ty", " will", " continue", " to", " provide", " a", " C", " interface", ".", " C", "++", " may", " only", " be", " used", " in", " the", " directories", " gcc", ",", " lib", "cpp", " and", " fix", "includes", ".", "\n", "\n", "All", " use", " of", " C", "++", " features", " is", " subject", " to", " the", " decisions", " of", " the", " maintain", "ers", " of", " the", " relevant", " components", ".", " (", "This", " rest", "ates", " something", " that", " is", " always", " true", " for", " gcc", ",", " which", " is", " that", " component", " maintain", "ers", " make", " the", " final", " decisions", " about", " those", " components", ".)", "\n", "\n", "When", " it", " is", " reasonably", " possible", ",", " use", " of", " prohibited", " features", " of", " C", "++", " gives", " some", " warning", " during", " boot", "strap", ".", " So", " we", " would", " have", " perhaps", " a", " new", " warning", " -", "W", "g", "cc", "-", "c", "xx", "-", "style", " which", " detects", " most", " \"", "easy", "\"", " violations", " of", " our", " own", " coding", " rules", ".", " Ind", "ent", "ation", " rules", " are", " defined", " to", " be", " compatible", " with", " some", " use", " of", " some", " pretty", "-", "pr", "inter", " like", " ast", "yle", ",", " and", " code", " should", " be", " when", " possible", " ind", "ented", " automatically", ".", "\n\n", "\n", "\n", "C", "++", " features", "\n", "\n", "C", "++", " is", " a", " complex", " language", ".", " We", " do", " not", " want", " to", " use", " all", " aspects", " of", " it", ".", "\n", "\n", "The", " following", " features", " of", " the", " C", "++", " language", " may", " not", " be", " used", " in", " GCC", " code", ".", " RT", "TI", " and", " dynamic", "_", "cast", " (", "these", " features", " may", " be", " permitted", " when", " certain", " non", "-", "default", " --", "enable", "-", "checking", " options", " are", " enabled", " so", " as", " to", " allow", " check", "ers", " to", " report", " dynamic", " types", ").", " Dis", "abling", " RT", "TI", " will", " save", " space", " in", " the", " compiler", ".", " Checking", " the", " type", " of", " a", " class", " at", " runtime", " usually", " indicates", " a", " design", " problem", ".", " If", " you", " need", " classes", " to", " behave", " differently", " at", " runtime", ",", " use", " a", " virtual", " method", ".", " If", " you", " need", " to", " know", " the", " type", " of", " a", " class", " for", " some", " other", " reason", ",", " use", " an", " enum", " or", " a", " virtual", " member", " function", " that", " cover", "ts", " a", " pointer", " to", " the", " more", " derived", " class", ".", " For", " example", ",", " 1", " common", "_", "type", " *", " p", " =", "....", ";", " =", "....", ";", " 2", " if", " (", " specific", "_", "type", " *", " q", " =", " p", " ->", " to", "_", "specific", " ())", " {", " ->", "())", " {", " 3", " 4", " }", " Ex", "ceptions", " and", " throw", " specifications", " Current", " GCC", " code", " is", " not", " exception", " safe", ".", " Dis", "abling", " exceptions", " will", " permit", " the", " compiler", " itself", " to", " be", " slightly", " more", " optimized", ".", " In", " particular", ",", " GCC", " may", " be", " built", " with", " -", "f", "no", "-", "ex", "ceptions", " and", " -", "f", "no", "-", "r", "tti", ".", " These", " restrictions", " notwithstanding", ",", " newly", " written", " GCC", " code", " should", " be", " exception", " safe", ",", " to", " permit", " for", " future", " reconsider", "ation", " of", " these", " standards", ".", " Mark", " Mitchell", ":", " That", " would", " mean", " some", " relatively", " major", " changes", " in", " style", ".", " For", " example", ",", " we", "'d", " have", " to", " get", " used", " to", " using", " auto", "_", "ptr", ",", " and", ",", " in", " general", ",", " using", " resource", "-", "acqu", "isition", "-", "as", "-", "initial", "ization", " everywhere", ".", " Of", " course", ",", " I", " think", " it", "'s", " good", " practice", ",", " but", " it", "'s", " a", " relatively", " high", " bar", ".", " Lawrence", "C", "row", "l", ":", " auto", "_", "ptr", " is", " broken", ".", " We", " should", " use", " shared", "_", "ptr", " instead", ",", " from", " TR", "1", "'s", " <", "memory", ">", " header", ".", "\n", "\n", "The", " following", " features", " of", " the", " C", "++", " language", " should", " in", " general", " be", " avoided", " in", " GCC", " code", ".", " Multiple", " inheritance", ".", " Multiple", " inheritance", " is", " confusing", " and", " rarely", " useful", ".", " Def", "ining", " new", " templates", " (", "use", " of", " existing", " templates", ",", " e", ".", "g", ".,", " from", " the", " standard", " library", ",", " is", " fine", ").", " This", " may", " be", " overly", " cautious", " and", " may", " be", " relaxed", " over", " time", ".", " N", "ested", " names", "paces", ".", " Not", " expected", " to", " be", " useful", " in", " the", " GCC", " code", " base", ".", " (", "Top", "-", "level", " names", "paces", " are", " permitted", ".)", " Conversion", " operators", ".", " All", " conversions", " should", " be", " explicit", " named", " functions", " to", " avoid", " confusion", " using", " statements", ".", " In", " general", " a", " reference", " to", " a", " given", " name", " should", " mean", " the", " same", " thing", " in", " any", " GCC", " source", " file", ".", " Using", " declarations", " may", " be", " used", " in", " class", " definitions", " to", " manage", " names", " within", " an", " inheritance", " hierarchy", ".", "\n", "\n", "The", " following", " features", " of", " the", " C", "++", " language", " are", " explicitly", " permitted", " in", " GCC", " code", ".", " Classes", " with", " public", " and", " private", " methods", ",", " data", " members", ",", " and", " construct", "ors", ".", " There", " are", " four", " special", " member", " functions", ":", " the", " default", " constructor", ",", " the", " copy", " constructor", ",", " the", " copy", " assignment", " operator", ",", " and", " the", " destruct", "or", ".", " The", " compiler", " will", " usually", " provide", " a", " default", " implementation", " for", " these", " functions", ".", " If", " that", " default", " does", " the", " right", " thing", ",", " document", " the", " use", " of", " the", " default", " explicitly", ".", " Otherwise", ",", " define", " the", " function", ".", " Def", "ining", " any", " of", " these", " functions", " may", " make", " the", " class", " non", "-", "P", "OD", ",", " which", " can", " reduce", " its", " efficiency", ".", " Construct", "ors", " and", " destruct", "ors", " are", " often", " much", " larger", " than", " programmers", " expect", ".", " Pre", "fer", " non", "-", "inline", " versions", " unless", " you", " have", " evidence", " that", " the", " inline", " version", " is", " needed", ".", " Single", " argument", " construct", "ors", " should", " always", " be", " declared", " explicit", " (", "im", "plement", "ing", " a", " warning", " for", " this", " is", " likely", " useful", " in", " general", ").", " Pa", "olo", "B", "onz", "ini", ":", " Try", " to", " avoid", " copy", " construct", "ors", " and", " assignment", " operators", ".", " Anything", " that", " includes", " pointer", " members", " and", " a", " destruct", "or", " should", " disable", " copy", " construct", "ors", " and", " assignment", " operators", " by", " declaring", " Type", "Name", "(", "const", " Type", "Name", "&", ");", " void", " operator", "=(", "const", " Type", "Name", "&", ");", " as", " private", " (", "maybe", " we", " will", " want", " a", " macro", " for", " this", ").", " Lawrence", "C", "row", "l", ":", " Classes", " generally", " are", " either", " value", " classes", " or", " identity", " classes", ".", " Copy", " construct", "ors", " and", " assignment", " operators", " are", " fine", " for", " value", " classes", ".", " They", " are", " often", " not", " appropriate", " to", " identity", " classes", ".", " These", " classes", " should", " delete", ",", " or", " disable", ",", " these", " functions", ".", " Mark", "ing", " such", " functions", " as", " follows", " will", " enable", " compiling", " against", " both", " C", "++", "03", " and", " C", "++", "11", ".", " 1", " Type", "Name", " (", " const", " Type", "Name", " &", ")", " DE", "LET", "ED", " ;", " &", ")", " 2", " void", " operator", " =", "(", " const", " Type", "Name", " &", ")", " DE", "LET", "ED", " ;", " =", "(&", ")", " Use", " of", " the", " C", "++", "98", " standard", " library", ",", " including", " the", " Standard", " Template", " Library", ".", "\n", "\n", "The", " following", " features", " of", " the", " C", "++", " language", " may", " be", " used", " with", " care", " when", " appropriate", " in", " GCC", " code", ".", " Class", " inheritance", ".", " Use", " public", " inheritance", " to", " describe", " '", "is", "-", "a", "'", " relationships", ".", " Use", " private", " inheritance", " to", " reuse", " an", " existing", " class", " in", " the", " implementation", " of", " the", " current", " class", ".", " Use", " protected", " inheritance", " to", " reuse", " an", " existing", " class", " in", " the", " implementation", " of", " a", " class", " hierarchy", ".", " Private", " and", " protected", " inheritance", " should", " normally", " be", " avoided", ".", " Virtual", " functions", ".", " Using", " virtual", " functions", " increases", " the", " size", " of", " an", " object", " of", " an", " instance", " of", " the", " class", " by", " one", " pointer", ".", " Therefore", " virtual", " functions", " must", " be", " avoided", " in", " objects", " which", " are", " widely", " allocated", ",", " such", " as", " an", " G", "IM", "PLE", " or", " RT", "L", ".", " However", ",", " virtual", " functions", " are", " acceptable", " where", " we", " use", " hooks", " today", ".", " Lawrence", "C", "row", "l", ":", " Virtual", " functions", " can", " often", " reduce", " the", " size", " of", " objects", " by", " binding", " information", " into", " the", " virtual", " tables", " and", " the", " virtual", " functions", ".", " For", " example", ",", " various", " type", " tags", " need", " not", " be", " present", ".", " Other", " attributes", " can", " be", " inferred", " from", " type", " and", " more", " general", " information", ".", " Other", " attributes", " can", " be", " inferred", " from", " extending", " the", " class", " hierarchy", " at", " the", " leaves", ".", " So", ",", " even", " though", " trees", " are", " heavily", " allocated", ",", " it", " remains", " to", " be", " seen", " whether", " virtual", " functions", " would", " increase", " the", " size", ".", " Function", " and", " method", " over", "loading", ".", " Function", " over", "loading", " can", " be", " confusing", ".", " However", ",", " in", " some", " cases", " introducing", " new", " function", " names", " adds", " little", " value", ",", " as", " in", " the", " current", " distinction", " between", " build", "_", "index", "_", "type", " and", " build", "_", "index", "_", "2", "_", "type", ".", " Function", " over", "loading", " is", " permitted", " provided", " the", " overloaded", " functions", " are", " sem", "antically", " identical", " or", " at", " least", " very", " similar", ".", " Virtual", " functions", " should", " not", " be", " overloaded", ".", " You", " may", " overload", " if", " the", " overloaded", " name", " supports", " an", " action", " notion", ".", " For", " example", ",", " the", " C", "++", " standard", "'s", " notion", " of", " swap", ".", " You", " may", " *", "not", "*", " overload", " when", " implicit", " conversions", " among", " argument", " types", " may", " yield", " unintended", " effects", ".", " For", " example", ",", " 1", " void", " sw", "izzle", " (", " int", " arg", " );", " );", " 2", " void", " sw", "izzle", " (", " const", " char", " *", " arg", " );", " );", " 3", "...", " sw", "izzle", " (", " NULL", " );", "...", "...", ");", "...", " Results", " in", " an", " unintended", " call", " to", " the", " int", " overload", " on", " some", " systems", ".", " In", " practice", ",", " the", " problem", " that", " this", " restriction", " addresses", " arises", " more", " from", " bad", " user", "-", "defined", " implicit", " conversion", " operators", ".", " ISO", " C", "++", " N", "24", "37", " ISO", " C", "++", " N", "25", "14", " You", " may", " overload", " if", " a", " single", " argument", ",", " in", " a", " single", " position", ",", " has", " multiple", " representations", ".", " For", " example", ",", " 1", " void", " append", " (", " const", " char", " *", " str", " );", " );", " 2", " void", " append", " (", " std", " ::", " string", " str", " );", " ::", ");", " You", " may", " *", "not", "*", " overload", " if", " more", " than", " one", " argument", " constitutes", " the", " representation", " of", " some", " data", " notion", ".", " For", " example", ",", " in", " 1", " void", " register", " (", " int", " house", ",", " const", " char", " *", " street", ",", " int", " zip", "code", " );", " );", " the", " arguments", " are", " a", " representation", " of", " addresses", ".", " Instead", ",", " the", " overload", " should", " be", " on", " addresses", ".", " 1", " void", " register", " (", " const", " Address", " &", " addr", " );", " );", " This", " restriction", " cannot", " apply", " to", " construct", "ors", ",", " where", " the", " whole", " point", " is", " to", " collect", " represent", "ational", " data", ".", " 1", " Address", " ::", " Address", " (", " int", " house", ",", " const", " char", " *", " street", ",", " int", " zip", "code", " );", " ::", ");", " Notwithstanding", " the", " restrictions", " above", ",", " you", " may", " overload", " to", " detect", " errors", ".", " That", " is", ",", " if", " unsigned", " numbers", " are", " good", ",", " but", " signed", " numbers", " are", " bad", ",", " you", " could", " overload", " 1", " void", " m", "unch", " (", " unsigned", " int", " arg", " );", " );", " 2", " void", " m", "unch", " (", " int", " arg", " );", " );", " and", " simply", " not", " define", " the", " signed", " int", " version", ".", " Anyone", " using", " it", " would", " get", " a", " link", "-", "time", " error", ".", " The", " C", "++", "0", "x", " standard", " has", " a", " syntax", " that", " enables", " compile", "-", "time", " detection", " of", " the", " problem", ".", " 1", " void", " m", "unch", " (", " int", " arg", " )", " =", " delete", " ;", " )", " =", " We", " can", " provide", " a", " macro", " compatible", " with", " both", " C", "++", "98", " and", " C", "++", "11", ".", " 1", " void", " m", "unch", " (", " int", " arg", " )", " DE", "LET", "ED", " ;", " Default", " arguments", ".", " Default", " arguments", " are", " another", " type", " of", " function", "/", "method", " over", "loading", ",", " and", " the", " same", " rules", " apply", ":", " it", " is", " permitted", " if", " the", " result", " is", " sem", "antically", " identical", ".", " Default", " arguments", " must", " always", " be", " P", "OD", " values", " and", " may", " not", " run", " construct", "ors", ".", " Virtual", " functions", " should", " not", " have", " default", " arguments", ".", " Default", " arguments", " cause", " confusion", " when", " attempting", " to", " take", " the", " address", " of", " a", " function", ".", " They", " cause", " client", " code", " taking", " the", " address", " of", " a", " function", " to", " break", " when", " a", " default", " argument", " is", " replaced", " by", " a", " specialized", " overload", ".", " So", ",", " default", " arguments", " should", " generally", " not", " be", " used", " in", " customer", "-", "facing", " interfaces", ".", " Consider", " function", " over", "loading", " instead", ".", " Operator", " over", "loading", ".", " Operator", " over", "loading", " is", " only", " permitted", " in", " the", " following", " cases", ".", " operator", "<<", " may", " be", " implemented", " as", " appropriate", " to", " print", " a", " value", " to", " a", " stream", ".", " Oper", "ators", " may", " only", " be", " overloaded", " for", " types", " that", " implement", " numeric", " values", ",", " where", " the", " overloaded", " operators", " implement", " the", " usual", " numeric", " semantics", ".", " operator", "()", " may", " be", " implemented", " as", " necessary", " for", " use", " with", " standard", " classes", ",", " such", " as", " for", " a", " std", "::", "sort", " compar", "ator", ".", " Appropri", "ate", " operators", " required", " for", " iter", "ators", " and", " smart", " pointers", ".", " Try", " to", " avoid", " complex", " iter", "ators", " (", "e", ".", "g", ".", " restrict", " to", " input", " iter", "ators", ").", " Lawrence", "C", "row", "l", ":", " operator", "[]", " for", " data", " structures", " seems", " like", " a", " good", " use", " case", ".", "\n", "\n", "At", " least", " for", " now", " we", " will", " continue", " to", " use", " printf", " style", " I", "/", "O", " rather", " than", " <", "i", "ost", "ream", ">", " style", " I", "/", "O", ".", " The", " latter", " should", " only", " be", " used", " in", " brand", " new", " areas", ",", " or", " after", " an", " agreed", " upon", " flag", " day", " transition", ".", " Since", " GCC", " already", " type", " checks", " printf", " arguments", ",", " <", "i", "ost", "ream", ">", " does", " not", " bring", " any", " clear", " benefits", ".", " La", "ury", "nas", "B", "ive", "inis", ":", " I", " propose", " to", " ban", " <", "i", "ost", "ream", ">", " style", " I", "/", "O", " in", " brand", " new", " areas", " too", ",", " as", " it", " need", "lessly", " compl", "icates", " i", "18", "n", ",", " unless", " something", " like", " Boost", " Format", " is", " used", ".", " (", "I", " do", " not", " propose", " introduce", " Boost", " dependency", ";", " this", " is", " just", " an", " indication", " how", " IM", "HO", " C", "++", " I", "/", "O", " should", " look", " like", ").", " Bas", "ile", "St", "aryn", "ke", "v", "itch", ":", " I", " believe", " that", " for", " all", " debugging", " or", " dumping", " outputs", " 1", ",", " using", " <", "i", "ost", "ream", ">", " style", " I", "/", "O", " should", " become", " the", " norm", ",", " not", " the", " exception", ".", " In", " particular", ",", " because", " plugins", " (", "e", ".", "g", ".", " M", "EL", "T", ")", " or", " other", " GCC", " extensions", " could", " be", " happy", " to", " output", " a", " dump", " into", " e", ".", "g", ".", " a", " memory", " stream", ",", " etc", ".", " And", " C", "++", " <", "i", "ost", "ream", ">", " style", " is", " much", " cleaner", " for", " output", "ting", " in", " arbitrary", " streams", ",", " including", " memory", ",", " that", " <", "c", "std", "io", ">", "\n", "\n", "Individual", " exceptions", " to", " the", " above", " rules", " may", " be", " made", " if", " the", " maintain", "ers", " agree", ".", " The", " existence", " of", " such", " exceptions", " does", " not", " imply", " that", " the", " rules", " may", " be", " avoided", " in", " other", " cases", ".", "\n", "\n", "C", "++", " C", "oding", " Con", "ventions", "\n", "\n", "The", " general", " guideline", " is", " to", " continue", " to", " follow", " the", " current", " C", " coding", " conventions", " where", " they", " make", " sense", ".", "\n", "\n", "All", " current", " GCC", " code", " uses", " a", " space", " between", " the", " function", " name", " and", " the", " left", " parent", "hesis", " in", " a", " function", " call", ".", " Essentially", " all", " C", "++", " code", " o", "mits", " that", " space", ",", " which", " is", " more", " consistent", " with", " C", "++", " syntax", ".", " For", " the", " present", " we", " will", " retain", " the", " space", ".", " It", " is", " possible", " that", " in", " the", " future", " we", " will", " switch", " the", " code", " with", " a", " flag", " day", ".", "\n", "\n", "In", " new", " code", " variables", " which", " are", " used", " in", " a", " small", " scope", " should", " be", " defined", " at", " the", " point", " of", " first", " use", ",", " rather", " than", " at", " the", " top", " of", " the", " function", ".", " Vari", "ables", " which", " are", " used", " throughout", " the", " function", " may", " be", " defined", " at", " the", " top", " of", " the", " function", ",", " as", " in", " C", ".", "\n", "\n", "Tem", "plates", ".", " Start", " template", " parameter", " names", " with", " a", " leading", " upper", "-", "case", " letter", ".", " Spec", "ify", " template", " parameter", " and", " argument", " lists", " with", " spaces", " to", " the", " outside", " of", " the", " angle", " brackets", ".", " 1", " template", " <", " typ", "ename", " Type", " >", " 2", " somet", "ype", " <", " Type", " >", " ::", " somet", "ype", " ()", " {", "...", " }", " >", " ::", "()", " {", "...", " }", " 3", " some", "func", " <", " int", " >", " (", " 3", " )", " >", " (", " 4", "\n", "\n", "Class", "es", ".", " Ind", "ent", " all", " elements", " defined", " within", " the", " body", " of", " a", " class", " by", " two", " spaces", ".", " All", " construct", "ors", " should", " initialize", " all", " data", " members", " in", " the", " member", " initial", "izer", " list", ".", " (", "If", " not", ",", " the", " compiler", " will", " implicitly", " initialize", " non", "-", "P", "OD", " fields", ",", " and", " any", " initialization", " in", " the", " body", " of", " the", " constructor", " implies", " extra", " work", ".)", " The", " names", " of", " methods", " and", " data", " members", " may", " be", " short", " as", " long", " as", " they", " are", " clear", ".", " All", " data", " members", " should", " be", " private", ".", " All", " data", " members", " should", " have", " names", " which", " end", " with", " an", " underscore", ".", " This", " convention", " highlights", " the", " extra", " overhead", " of", " access", " to", " fields", " over", " local", " variables", ".", " Where", " appropriate", ",", " a", " data", " member", " may", " have", " an", " access", "or", " method", " which", " does", " nothing", " but", " return", " the", " value", " of", " the", " member", ".", " The", " name", " of", " such", " a", " method", " should", " be", " the", " same", " as", " the", " name", " of", " the", " member", ",", " without", " the", " trailing", " underscore", ".", " When", " a", " method", " refers", " to", " a", " non", "-", "static", " data", " member", ",", " it", " should", " always", " qualify", " the", " reference", " with", " this", "->", ".", " This", " makes", " it", " clear", " to", " the", " reader", " where", " the", " value", " is", " coming", " from", ".", " It", " also", " means", " that", " if", " the", " class", " is", " later", " converted", " to", " a", " template", ",", " there", " will", " be", " no", " difficulties", " with", " two", "-", "phase", " name", " lookup", ".", " It", " is", " understood", " that", " this", " convention", " is", " not", " used", " in", " all", " C", "++", " code", ".", " Note", " that", " this", " is", " not", " a", " real", " change", " from", " the", " existing", " C", " code", ",", " where", " there", " is", " no", " implicit", " this", "->", ".", " Jack", "L", "l", "oyd", ":", " Should", " there", " be", " a", " warning", " to", " check", " this", "?", " Something", " like", " -", "W", "no", "-", "impl", "icit", "-", "this", " Lawrence", "C", "row", "l", ":", " This", " syntax", " places", " a", " unnecessary", " line", "-", "length", " burden", " on", " programmers", ".", " The", " trailing", " underscore", " convention", " is", " sufficient", " to", " show", " that", " the", " value", " comes", " from", " a", " data", " member", ".", " Because", " data", " members", " have", " a", " distinct", " naming", " convention", " from", " other", " symbols", ",", " the", " only", " problem", " with", " two", "-", "phase", " lookup", " would", " be", " a", " compile", "-", "time", " failure", " to", " find", " the", " a", " non", "-", "private", " field", " in", " a", " base", " class", ".", " But", " these", " do", " not", " exist", " by", " the", " \"", "only", " private", " data", " members", "\"", " rule", ".", " When", " defining", " a", " class", ",", " first", " define", " all", " public", " types", ",", " then", " all", " public", " construct", "ors", ",", " then", " the", " public", " destruct", "or", ",", " then", " all", " public", " methods", ".", " Lawrence", "C", "row", "l", ":", " Putting", " function", " bodies", " before", " data", " members", " makes", " for", " some", " uncomfortable", " class", " reading", ",", " as", " the", " context", " for", " interpreting", " the", " function", " bodies", " is", " not", " yet", " complete", ".", " I", " would", " rather", " see", " data", " member", " definitions", " before", " function", " definitions", " or", " all", " function", " definitions", " pushed", " outside", " of", " the", " class", " definition", ".", " Method", " bodies", " may", " only", " appear", " in", " the", " class", " definition", " if", " they", " are", " very", " short", ",", " no", " more", " than", " five", " lines", ",", " not", " including", " function", " header", " and", " braces", ".", " Otherwise", " the", " method", " body", " should", " be", " defined", " outside", " of", " the", " class", " definition", ".", "\n\n", "\n", "\n", "1", " class", " my", "_", "class", " {", " 2", " public", " :", " 3", " my", "_", "class", " ()", " ()", " 4", " :", " field", "1", "_", " (", " 0", " ),", " field", "2", "_", " (", " NULL", "_", "T", "REE", " )", " ),", " 5", " {", " }", " {", " }", " 6", " 7", " 8", " int", " 9", " field", "1", " ()", " ()", " 10", " {", " 11", " return", " this", " ->", " field", "1", "_", " ;", " ->", " 12", " }", " 13", " 14", " private", " :", " 15", " 16", " int", " field", "1", "_", " ;", " 17", " 18", " tree", " field", "2", "_", " ;", " 19", " };", " };", "\n", "\n", "Law", "rence", "C", "row", "l", ":", " There", " has", " been", " some", " objection", " to", " not", " having", " class", " member", " function", " definitions", " start", " at", " the", " beginning", " of", " a", " line", ".", " We", " could", " require", " all", " member", " functions", " to", " be", " defined", " out", " of", " line", ".", "\n", "\n", "Note", " that", " the", " rules", " for", " classes", " do", " not", " apply", " to", " struct", "s", ".", " Struct", "s", " continue", " to", " behave", " as", " before", ",", " and", " in", " particular", " there", " is", " no", " need", " to", " add", " a", " trailing", " underscore", " to", " field", " names", ".", " (", "Note", " here", " we", " are", " making", " a", " distinction", " between", " struct", "s", " and", " classes", " that", " does", " not", " technically", " exist", " within", " C", "++", ".", " Nevertheless", ",", " it", " is", " a", " useful", " distinction", " and", " we", " wish", " to", " preserve", " it", ".)", "\n", "\n", "When", " it", " is", " appropriate", " to", " use", " a", " child", " class", " with", " virtual", " functions", ",", " the", " virtual", " functions", " should", " all", " be", " declared", " as", " protected", ".", " Code", " should", " explicitly", " distinguish", " between", " the", " interface", " which", " the", " parent", " class", " presents", " to", " users", " of", " the", " class", " (", "the", " public", " methods", ")", " and", " the", " interface", " which", " the", " child", " class", " implements", " (", "the", " protected", " virtual", " methods", ").", " (", "The", " destruct", "or", " is", " an", " exception", " here", ";", " a", " virtual", " destruct", "or", " may", " and", " indeed", " normally", " should", " be", " public", ").", "\n", "\n", "Def", "initions", " within", " the", " body", " of", " a", " namespace", " are", " not", " ind", "ented", ".", "\n", "\n", "In", " general", " lines", " should", " be", " limited", " to", " 80", " characters", ".", " In", " C", "++", " code", " function", " names", " are", " often", " longer", ".", " If", " this", " would", " cause", " the", " first", " function", " parameter", " with", " its", " type", " to", " exceed", " 80", " characters", ",", " it", " should", " appear", " on", " the", " next", " line", " ind", "ented", " four", " spaces", ".", "\n", "\n", "1", " void", " 2", " very", "_", "long", "_", "class", "_", "name", " ::", " very", "_", "long", "_", "function", "_", "name", " (", " ::", " 3", " very", "_", "long", "_", "type", "_", "name", " arg", " )", " 4", " {", "\n", "\n", "Law", "rence", "C", "row", "l", " Sometimes", " the", " class", " qualifier", " and", " function", " name", " together", " exceed", " 80", " characters", ".", " In", " this", " case", ",", " break", " the", " line", " before", " the", " ::", " operator", ".", " We", " may", " wish", " to", " do", " so", " preempt", "ively", " for", " all", " class", " member", " functions", "."]