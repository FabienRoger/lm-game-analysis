["B", "2", "G", "!", " Fen", "nec", "!", " Social", " API", "!", " They", "\ufffd", "\ufffd", "re", " all", " happening", ",", " and", " memory", " consumption", " is", " a", " big", " deal", " for", " all", " of", " them", ".", " Time", " for", " a", " Mem", "Sh", "r", "ink", " report", ".", "\n", "\n", "B", "2", "G", "\n", "\n", "Lots", " of", " B", "2", "G", " work", " is", " happening", ",", " unsurprisingly", ".", " All", " of", " these", " changes", " have", " been", " back", "ported", " to", " the", " Aurora", " channel", ".", "\n", "\n", "Kyle", " Hue", "y", " landed", " an", " important", " patch", " that", " mer", "ges", " system", " comp", "artments", " together", ".", " This", " avoids", " wasted", " space", " caused", " by", " having", " 100", "s", " of", " small", " comp", "artments", ".", " As", " Chris", " Jones", " said", ":", " \ufffd", "\ufffd", "It", "\ufffd", "\ufffd", "s", " a", " completely", " different", " phone", " with", " these", " patches", ".", "\ufffd", "\ufffd", " Unfortunately", ",", " the", " preference", " controlling", " this", " behaviour", " is", " currently", " turned", " off", " on", " B", "2", "G", ",", " because", " it", "\ufffd", "\ufffd", "s", " causing", " some", " Marion", "ette", " test", " failures", ".", " Hopefully", " they", "\ufffd", "\ufffd", "ll", " be", " dealt", " with", " soon", ".", " Note", " that", " this", " preference", " won", "\ufffd", "\ufffd", "t", " be", " turned", " on", " in", " desktop", " builds", ",", " and", " there", "\ufffd", "\ufffd", "s", " a", " medium", "-", "term", " plan", " to", " avoid", " this", " wasted", " space", " in", " a", " less", " hack", "y", " fashion", ".", "\n", "\n", "Marco", " Bon", "ardo", " disabled", " Places", " in", " B", "2", "G", ",", " saving", " about", " 300", " Ki", "B", " in", " the", " main", " process", ".", "\n", "\n", "Justin", " Le", "bar", " added", " code", " to", " trigger", " memory", " pressure", " events", " when", " low", "mem", "killer", " notifications", " occur", ".", "\n", "\n", "Justin", " also", " tweaked", " things", " so", " that", " the", " garbage", " collector", " is", " more", " likely", " to", " run", " when", " screenshots", " are", " taken", ".", "\n", "\n", "Jeff", " Mu", "iz", "ela", "ar", " fixed", " a", " graphics", " bug", " that", " I", " don", "\ufffd", "\ufffd", "t", " understand", " but", " apparently", " avoids", " all", "ocating", " lots", " of", " memory", " on", " the", " B", "2", "G", " unlock", " screen", ".", "\n", "\n", "Chris", " Jones", " ensured", " that", " remote", " content", " drop", " their", " buffers", " when", " they", "\ufffd", "\ufffd", "re", " hidden", ".", "\n", "\n", "I", " tweaked", " the", " size", " of", " the", " arena", " chunks", " used", " by", " X", "PT", ",", " which", " saved", " about", " 120", " Ki", "B", " per", " process", " on", " 64", "-", "bit", " builds", ",", " and", " a", " bit", " less", " on", " 32", "-", "bit", " builds", ".", "\n", "\n", "I", " also", " shrunk", " the", " initial", " size", " of", " the", " S", "PS", " hash", " table", ",", " which", " saves", " 48", " Ki", "B", " per", " process", " on", " 64", "-", "bit", " builds", " and", " 24", " Ki", "B", " on", " 32", "-", "bit", " builds", ".", "\n", "\n", "Memory", " Reporting", "\n", "\n", "Lots", " of", " work", " happened", " on", " the", " memory", " reporting", " front", ".", " This", " was", " inspired", " by", " \ufffd", "\ufffd", "he", "ap", "-", "un", "classified", "\ufffd", "\ufffd", " typically", " being", " much", " higher", " on", " B", "2", "G", " than", " on", " desktop", ".", " Desktop", " Firefox", " uses", " a", " single", " process", " and", " its", " memory", " consumption", " is", " usually", " measured", " in", " the", " 100", "s", " of", " Mi", "Bs", " or", " more", ".", " In", " contrast", ",", " B", "2", "G", " uses", " one", " \ufffd", "\ufffd", "main", "\ufffd", "\ufffd", " process", " and", " then", " one", " process", " per", " running", " app", ",", " and", " the", " smaller", " ones", " are", " typically", " around", " 10", " Mi", "B", ".", " As", " a", " result", ",", " the", " sund", "ry", " small", " per", "-", "process", " things", " that", " don", "\ufffd", "\ufffd", "t", " matter", " much", " for", " desktop", " lo", "om", " larger", " on", " B", "2", "G", ".", " (", "For", " the", " same", " reason", ",", " changes", " that", " reduce", " per", "-", "process", " memory", " by", " small", "ish", " amounts", " have", " out", "size", " value", " on", " B", "2", "G", ".)", " Most", " of", " the", " following", " changes", " have", " also", " been", " back", "ported", " to", " the", " Aurora", " channel", ".", "\n", "\n", "Nick", " Hur", "ley", " added", " a", " \ufffd", "\ufffd", "expl", "icit", "/", "network", "/", "disk", "-", "cache", "\ufffd", "\ufffd", " memory", " reporter", ".", " It", " typically", " measures", " 100", "s", " of", " Ki", "Bs", " in", " desktop", " Firefox", ".", " (", "It", " doesn", "\ufffd", "\ufffd", "t", " get", " used", " on", " B", "2", "G", ".)", "\n", "\n", "I", " added", " memory", " reporters", " \ufffd", "\ufffd", "expl", "icit", "/", "xp", "com", "/", "component", "-", "manager", "\ufffd", "\ufffd", " and", " \ufffd", "\ufffd", "expl", "icit", "/", "xp", "com", "/", "category", "-", "manager", "\ufffd", "\ufffd", ".", " Together", " they", " measure", " about", " 280", " Ki", "B", " per", " process", " on", " 64", "-", "bit", " builds", ",", " and", " a", " bit", " less", " on", " 32", "-", "bit", " builds", ".", "\n", "\n", "I", " added", " a", " memory", " reporter", " \ufffd", "\ufffd", "expl", "icit", "/", "script", "-", "names", "pace", "-", "manager", "\ufffd", "\ufffd", ".", " It", " measures", " just", " over", " 150", " Ki", "B", " per", " process", " on", " 64", "-", "bit", " builds", ",", " and", " a", " bit", " less", " on", " 32", "-", "bit", " builds", ".", "\n", "\n", "I", " added", " a", " memory", " reporter", " \ufffd", "\ufffd", "expl", "icit", "/", "xp", "com", "/", "effective", "-", "T", "LD", "-", "service", "\ufffd", "\ufffd", ".", " It", " measures", " about", " 128", " Ki", "B", " per", " process", " on", " 64", "-", "bit", " builds", ",", " and", " a", " bit", " less", " on", " 32", "-", "bit", " builds", ".", "\n", "\n", "I", " added", " some", " detail", " to", " the", " JS", " object", " memory", " reporters", ".", " This", " gives", " slightly", " more", " insight", " into", " where", " this", " memory", " is", " going", ",", " but", " the", " extra", " memory", " measured", " as", " a", " result", " is", " usually", " pretty", " small", ".", "\n", "\n", "I", " fixed", " the", " \ufffd", "\ufffd", "expl", "icit", "/", "atom", "-", "t", "ables", "\ufffd", "\ufffd", " memory", " reporter", ",", " which", " was", " errone", "ously", " always", " reporting", " 0", " bytes", ".", " It", " now", " measures", " anywhere", " from", " a", " few", " 100", " Ki", "Bs", " to", " several", " Mi", "Bs", " of", " memory", ".", " This", " was", " a", " frustrating", " bug", " to", " find", ".", " D", "MD", " exists", " to", " check", " that", " memory", " reporters", " are", " measuring", " memory", " properly", ",", " and", " the", " reporter", " was", " doing", " its", " measurements", " just", " fine", ".", " But", " D", "MD", " cannot", " check", " that", " the", " measured", " amounts", " are", " added", " correctly", ",", " and", " that", "\ufffd", "\ufffd", "s", " what", " was", " going", " wrong", " here", " \u2014", " a", " line", " that", " should", " have", " been", " this", ":", "\n", "\n", "return", " n", ";", "\n", "\n", "instead", " was", " this", ":", "\n", "\n", "return", " 0", ";", "\n", "\n", "In", " other", " words", ",", " the", " code", " I", " had", " written", " was", " doing", " the", " difficult", " part", " correctly", ",", " but", " botched", " the", " trivial", " part", ".", " How", " annoying", ".", "\n", "\n", "Social", " API", "\n", "\n", "Fel", "ipe", " G", "omes", " fixed", " a", " document", " leak", " that", " occurred", " when", " the", " social", " sidebar", " was", " hidden", ",", " and", " disappeared", " only", " when", " it", " was", " unh", "idden", ".", "\n", "\n", "Fel", "ipe", " also", " added", " code", " to", " clear", " the", " previous", " profile", " when", " Social", " is", " to", "gg", "led", " off", ",", " which", " prevents", " a", " leak", ".", "\n", "\n", "The", " social", " API", " still", " has", " some", " significant", " unresolved", " memory", " consumption", " issues", ",", " which", " are", " a", " concern", ".", "\n", "\n", "F", "enne", "c", "\n", "\n", "K", "art", "ik", "aya", " Gupta", " (", "a", ".", "k", ".", "a", ".", " Kats", ")", " turned", " on", " tab", " expiration", " for", " Fen", "nec", ".", " What", " this", " means", " is", " that", " Fen", "nec", " will", " now", " un", "load", " the", " contents", " of", " background", " tabs", " in", " certain", " circumstances", " \u2014", " when", " memory", " is", " low", ",", " and", " in", " some", " cases", " when", " a", " tab", " hasn", "\ufffd", "\ufffd", "t", " been", " viewed", " for", " over", " an", " hour", " \u2014", " and", " then", " reload", " them", " when", " they", " are", " brought", " back", " into", " the", " foreground", ".", " Read", " Kats", "\ufffd", "\ufffd", " blog", " post", " for", " more", " details", ".", "\n", "\n", "(", "This", " change", " was", " prompted", " by", " Project", " 256", "meg", ",", " which", " aims", " to", " make", " Fen", "nec", " usable", " on", " phones", " with", " only", " 256", " Mi", "B", " of", " RAM", ".", " (", "F", "enne", "c", " currently", " requires", " 512", " Mi", "B", ",", " according", " to", " the", " official", " specs", ".)", " Kats", " has", " just", " got", " to", " the", " point", " where", " Fen", "nec", " can", " actually", " start", " on", " 256", " Mi", "B", " devices", ".", " Although", " Fen", "nec", " only", " uses", " a", " single", " process", ",", " there", " is", " obviously", " significant", " overlap", " between", " this", " goal", " and", " B", "2", "G", "\ufffd", "\ufffd", "s", " memory", " reduction", " goals", ".)", "\n", "\n", "An", " obvious", " follow", "-", "up", " idea", " is", " to", " add", " tab", " expiration", " to", " desktop", " Firefox", ".", " But", " the", " bug", " tracking", " that", " idea", " has", " seen", " more", " heated", " discussion", ".", " The", " reason", " is", " that", " tab", " expiration", " might", " cause", " data", " loss", " in", " some", " cases", ".", " This", " is", " less", " of", " a", " problem", " on", " Fen", "nec", " because", " (", "as", " far", " as", " I", " can", " tell", ")", " there", " is", " less", " of", " an", " expectation", " that", " in", "-", "flight", " data", " will", " be", " saved", " on", " mobile", " devices", ".", " For", " example", ",", " having", " processes", " killed", " due", " to", " memory", " constraints", " on", " mobile", " is", " much", " more", " common", " than", " on", " desktop", ".", " Still", ",", " I", " expect", " plenty", " more", " arguing", " before", " this", " issue", " is", " resolved", " one", " way", " or", " the", " other", ".", " One", " option", " is", " to", " allow", " it", " on", " desktop", " but", " have", " it", " disabled", " by", " default", ".", "\n", "\n", "Add", "-", "ons", "\n", "\n", "Mic", "hel", " Gutierrez", " fixed", " a", " zombie", " compartment", " in", " Video", " Download", "Helper", ",", " which", " is", " the", " 2", "nd", " most", " popular", " add", "-", "on", " at", " AM", "O", ".", " Version", " 4", ".", "9", ".", "11", " has", " the", " fix", ".", "\n", "\n", "We", " hit", " a", " notable", " milestone", " on", " the", " add", "-", "on", " front", " this", " fortnight", ":", " on", " November", " 1", "st", " hit", " bug", " for", " tracking", " known", " leaks", " in", " add", "-", "ons", " \u2014", " filed", " 16", " months", " ago", " \u2014", " had", " zero", " blockers", ".", " In", " other", " words", ",", " we", " reached", " the", " point", " where", " no", " add", "-", "ons", " were", " known", " to", " leak", "!", " Unfortunately", " this", " didn", "\ufffd", "\ufffd", "t", " last", " long", ",", " and", " at", " the", " time", " of", " writing", " the", " tracking", " bug", " has", " three", " blocking", " bugs", ".", " Still", ",", " it", "\ufffd", "\ufffd", "s", " confirmation", " that", " what", " used", " to", " be", " our", " biggest", " memory", " consumption", " problem", " is", " well", " under", " control", ".", "\n", "\n", "Bug", " Count", "s", "\n", "\n", "Here", " are", " the", " current", " bug", " counts", ".", "\n", "\n", "P", "1", ":", " 20", " (-", "3", "/+", "5", ")", "\n", "\n", "P", "2", ":", " 110", " (-", "10", "/+", "7", ")", "\n", "\n", "P", "3", ":", " 102", " (-", "3", "/+", "8", ")", "\n", "\n", "Un", "pri", "or", "itized", ":", " 4", " (-", "2", "/+", "4", ")", "\n", "\n", "As", " always", ",", " the", " current", " bug", " lists", " can", " be", " found", " by", " following", " the", " links", " on", " the", " Mem", "Sh", "r", "ink", " wiki", " page", "."]