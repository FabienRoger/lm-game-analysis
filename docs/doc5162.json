["Stra", "ight", " out", " of", " Kubrick", "'s", " 2001", ":", " A", " Space", " Odd", "ess", "y", ",", " Amazon", "'s", " popular", " Echo", " AI", " device", " has", " brought", " artif", "ical", " intelligence", " right", " into", " our", " living", " rooms", ".", " If", " you", " have", " Alexa", " in", " your", " home", ",", " you", " know", " how", " convenient", " it", " is", " to", " get", " the", " weather", " or", " hear", " a", " random", " joke", " on", " command", " (", "she", "'s", " actually", " pretty", " funny", ").", " Here", "'s", " a", " DIY", " version", " that", "'s", " as", " fun", " to", " make", " as", " it", " is", " to", " interact", " with", " after", " it", "'s", " done", ".", "\n", "\n", "Overview", "\n", "\n", "In", " this", " project", " we", " will", " create", " an", " Amazon", " Echo", " clone", " based", " on", " the", " Intel", " Edison", " hardware", " and", " IBM", " Watson", " platform", ".", " Note", " that", " your", " \"", "Alex", "a", "\"", " may", " not", " be", " as", " fully", " capable", " as", " Amazon", "'s", " but", " it", " will", " be", " a", " whole", " lot", " cheaper", " and", " a", " lot", " more", " fun", " to", " build", ".", "\n", "\n", "During", " the", " project", " we", " will", " covering", " the", " following", " topics", ":", "\n", "\n", "Capt", "uring", " audio", " with", " a", " USB", " microphone", ".", "\n", "\n", "S", "ending", " audio", " to", " a", " Bluetooth", " speaker", ".", "\n", "\n", "Using", " Johnny", "-", "Five", " to", " interface", " with", " the", " Edison", "'s", " IO", ".", "\n", "\n", "Using", " IBM", "'s", " Watson", " Speech", "-", "to", "-", "Text", " and", " Text", "-", "to", "-", "Spe", "ech", " services", ".", "\n", "\n", "Getting", " Started", "\n", "\n", "What", " you", "'ll", " need", " to", " complete", " this", " project", ":", "\n", "\n", "If", " you", " haven", "'t", " already", " done", " so", ",", " you", "'ll", " need", " to", " setup", " your", " Edison", " and", " get", " the", " latest", " firmware", " flashed", ".", " You", " can", " follow", " our", " quick", " article", " on", " Getting", " Started", " with", " the", " Intel", " Edison", " or", " check", " out", " Intel", "'s", " Getting", " Started", " Guide", ".", "\n", "\n", "NOTE", ":", " I", "'m", " using", " the", " Intel", " XD", "K", " IoT", " Edition", " because", " it", " makes", " debugging", " and", " uploading", " code", " to", " the", " board", " very", " easy", ".", " To", " learn", " more", " about", " the", " IDE", " and", " how", " to", " get", " started", " using", " it", " check", " out", " Getting", " Started", " with", " the", " Intel", " XD", "K", " IoT", " Edition", ".", " It", " is", " not", " required", " for", " this", " project", " though", ".", "\n", "\n", "Connect", " Bluetooth", " Speaker", "\n", "\n", "Est", "ablish", " a", " terminal", " to", " your", " Edison", " using", " either", " of", " the", " guides", " above", ".", "\n", "\n", "Make", " your", " Bluetooth", " device", " discover", "able", ".", " In", " my", " case", " I", " needed", " to", " push", " the", " pair", " button", " on", " the", " back", " of", " the", " speaker", ".", "\n", "\n", "In", " the", " terminal", " to", " your", " board", " type", " the", " following", ":", "\n", "\n", "root", "@", "ed", "ison", ":", "~", "#", " r", "f", "kill", " un", "block", " blu", "etooth", " root", "@", "ed", "ison", ":", "~", "#", " blu", "etooth", "ctl", " [", "b", "lu", "etooth", "]", " scan", " on", "\n", "\n", "This", " starts", " the", " Bluetooth", " Manager", " on", " the", " Edison", " and", " starts", " scanning", " for", " devices", ".", " The", " results", " should", " look", " something", " like", ":", "\n", "\n", "D", "iscovery", " started", " [", "CH", "G", "]", " Controller", " 98", ":", "4", "F", ":", "EE", ":", "06", ":", "06", ":", "05", " Discover", "ing", ":", " yes", " [", "NEW", "]", " Device", " A", "0", ":", "E", "9", ":", "DB", ":", "08", ":", "54", ":", "C", "4", " O", "ont", "Z", " Angle", "\n", "\n", "Find", " your", " device", " in", " the", " list", " and", " pair", " to", " it", ".", "\n", "\n", "[", "b", "lu", "etooth", "]", " pair", " A", "0", ":", "E", "9", ":", "DB", ":", "08", ":", "54", ":", "C", "4", "\n", "\n", "In", " some", " cases", ",", " the", " device", " may", " need", " to", " connect", " as", " well", ".", "\n", "\n", "[", "b", "lu", "etooth", "]", " connect", " A", "0", ":", "E", "9", ":", "DB", ":", "08", ":", "54", ":", "C", "4", "\n", "\n", "Exit", " the", " Bluetooth", " Manager", ".", "\n", "\n", "[", "b", "lu", "etooth", "]", " quit", "\n", "\n", "Let", "'s", " verify", " that", " your", " device", " is", " recognized", " in", " pulse", " audio", ":", "\n", "\n", "root", "@", "ed", "ison", ":", "~", "#", " pact", "l", " list", " sinks", " short", "\n", "\n", "If", " all", " is", " good", ",", " you", " should", " see", " your", " device", " listed", " as", " a", " sink", " device", " and", " the", " name", " should", " start", " with", " blue", "z", "_", "s", "ink", " like", " the", " example", " output", " below", ".", "\n", "\n", "0", " al", "sa", "_", "output", ".", "platform", "-", "mer", "r", "_", "dp", "cm", "_", "d", "ummy", ".", "0", ".", "an", "alog", "-", "st", "ereo", " module", "-", "alsa", "-", "card", ".", "c", " s", "16", "le", " 2", "ch", " 48", "000", "Hz", " S", "US", "P", "ENDED", " 1", " al", "sa", "_", "output", ".", "0", ".", "an", "alog", "-", "st", "ereo", " module", "-", "alsa", "-", "card", ".", "c", " s", "16", "le", " 2", "ch", " 44", "100", "Hz", " S", "US", "P", "ENDED", " 2", " blue", "z", "_", "s", "ink", ".", "A", "0", "_", "E", "9", "_", "DB", "_", "08", "_", "54", "_", "C", "4", " module", "-", "bl", "uez", "5", "-", "device", ".", "c", " s", "16", "le", " 2", "ch", " 44", "100", "Hz", " S", "US", "P", "ENDED", "\n", "\n", "Now", " let", "'s", " set", " our", " Bluetooth", " device", " as", " the", " default", " sink", " for", " the", " pulse", " audio", " server", ":", "\n", "\n", "root", "@", "ed", "ison", ":", "~", "#", " pact", "l", " set", "-", "default", "-", "s", "ink", " blue", "z", "_", "s", "ink", ".", "A", "0", "_", "E", "9", "_", "DB", "_", "08", "_", "54", "_", "C", "4", "\n", "\n", "Connect", " USB", " Micro", "phone", "\n", "\n", "The", " Edison", " has", " two", " USB", " modes", ":", " host", " mode", " and", " device", " mode", ".", " To", " use", " a", " USB", " microphone", " you", "'ll", " need", " to", " switch", " the", " Edison", " into", " host", " mode", " by", " flipping", " the", " micro", "switch", ",", " located", " between", " the", " standard", " sized", " USB", " port", " and", " the", " micro", " USB", " port", ",", " towards", " the", " large", " USB", " port", ".", " You", " will", " also", " need", " to", " power", " the", " Edison", " with", " an", " external", " DC", " power", " supply", " and", " not", " through", " the", " micro", " USB", ".", "\n", "\n", "Then", " simply", " plug", " your", " microphone", " in", " the", " large", " USB", " port", ".", "\n", "\n", "Let", "'s", " make", " sure", " the", " Edison", " recognizes", " our", " microphone", " as", " an", " audio", " source", " by", " using", " the", " are", "c", "ord", " command", ".", "\n", "\n", "root", "@", "ed", "ison", ":", "~", "#", " are", "c", "ord", " -", "l", "\n", "\n", "The", " output", " contains", " all", " of", " the", " hardware", " capture", " devices", " available", ".", " L", "ocate", " your", " USB", " Audio", " device", " and", " make", " note", " of", " its", " card", " number", " and", " device", " number", ".", " In", " the", " example", " output", " below", " my", " mic", " is", " device", " 0", " on", " card", " 2", ".", "\n", "\n", "...", " card", " 2", ":", " D", "SP", " [", "Pl", "ant", "ronics", ".", "Audio", " 655", " D", "SP", "],", " device", " 0", ":", " USB", " Audio", " [", "USB", " Audio", "]", " Sub", "devices", ":", " 1", "/", "1", " Sub", "device", " #", "0", ":", " sub", "device", " #", "0", "\n", "\n", "Let", "'s", " Get", " C", "oding", "\n", "\n", "In", " less", " than", " 200", " lines", " of", " code", " (", "including", " comments", ")", " we", "'ll", " have", " a", " system", " that", " will", ":", "\n", "\n", "Listen", " for", " a", " button", " press", " Play", " a", " sound", " to", " let", " the", " user", " know", " it", "'s", " listening", " Capture", " 5", " seconds", " of", " audio", " input", " Convert", " the", " audio", " input", " to", " text", " Perform", " a", " command", " or", " search", " on", " the", " input", " text", " Convert", " the", " text", " results", " to", " speech", " Play", " the", " speech", " audio", " to", " the", " user", "\n", "\n", "I", "'ve", " broken", " the", " code", " up", " into", " easy", " to", " understand", " blocks", ".", " Let", "'s", " walk", " through", " them", " and", " explain", " along", " the", " way", ".", "\n", "\n", "Requires", " and", " Glob", "als", "\n", "\n", "Nothing", " special", " here", ".", " Just", " require", " the", " modules", " we", " need", " and", " declare", " some", " v", "ars", " to", " use", " a", " little", " later", ".", "\n", "\n", "Initial", "ize", " Watson", " Services", "\n", "\n", "Another", " simple", " block", " of", " code", " but", " this", " one", " requires", " a", " little", " pre", "-", "work", ".", " IBM", " Watson", " Cloud", " Services", " requires", " credentials", " for", " each", " specific", " service", " used", ".", " Follow", " the", " Ob", "taining", " credentials", " for", " Watson", " services", " guide", " to", " get", " credentials", " for", " both", " the", " Speech", "-", "To", "-", "Text", " and", " the", " Text", "-", "To", "-", "Spe", "ech", " services", ".", "\n", "\n", "Text", "-", "to", "-", "Spe", "ech", " and", " Speech", "-", "to", "-", "Text", " Magic", "\n", "\n", "First", " let", "'s", " take", " a", " look", " at", " the", " Text", "-", "to", "-", "Spe", "ech", " (", "T", "TS", ")", " function", ".", " There", " are", " two", " parts", " to", " T", "TS", ":", " 1", ")", " Conver", "ting", " the", " text", " to", " audio", " and", " 2", ")", " Playing", " the", " audio", ".", "\n", "\n", "For", " the", " first", ",", " we", " are", " obviously", " using", " the", " IBM", " Watson", " Cloud", " Services", " which", " couldn", "'t", " make", " it", " any", " easier", ".", " All", " we", " need", " to", " do", " is", " pass", " the", " text", " we", " would", " like", " converted", " and", " the", " audio", " format", " we", " would", " like", " back", " into", " the", " synthes", "ize", " method", " and", " it", " returns", " a", " Stream", ".", "\n", "\n", "For", " the", " second", ",", " we", " are", " using", " G", "Streamer", ".", " More", " specifically", " g", "st", "-", "launch", ".", " We", " take", " the", " Stream", " returned", " from", " synthes", "ize", " and", " pipe", " it", " directly", " into", " the", " std", "in", " on", " the", " child", " process", " of", " g", "st", "-", "launch", "-", "1", ".", "0", ".", " G", "Streamer", " then", " processes", " it", " as", " a", " w", "av", " file", " and", " sends", " it", " to", " the", " default", " audio", " output", ".", "\n", "\n", "Next", " let", "'s", " look", " at", " the", " Speech", "-", "to", "-", "Text", " (", "ST", "T", ")", " function", ".", " As", " with", " the", " T", "TS", " function", ",", " there", " are", " two", " main", " parts", ".", "\n", "\n", "The", " first", " is", " capturing", " the", " audio", ".", " To", " capture", " the", " audio", " we", " are", " using", " are", "c", "ord", ".", " are", "c", "ord", " is", " fairly", " straightforward", " with", " the", " exception", " of", " the", " -", "D", " option", ".", " Earlier", " when", " we", " set", " up", " the", " USB", " microphone", ",", " we", " used", " are", "c", "ord", " -", "l", " to", " confirm", " the", " system", " saw", " it", ".", " That", " also", " gave", " us", " the", " card", " and", " device", " numbers", " associated", " with", " the", " mic", ".", " In", " my", " case", ",", " the", " mic", " is", " device", " 0", " on", " card", " 2", ".", " There", "for", ",", " the", " -", "D", " option", " is", " set", " to", " h", "w", ":", "2", ",", "0", " (", "hard", "ware", " device", ",", " card", " 2", ",", " device", " 0", ".)", " By", " not", " providing", " a", " file", " to", " record", " the", " audio", " to", ",", " we", " are", " telling", " are", "c", "ord", " to", " send", " all", " data", " to", " its", " std", "out", ".", "\n", "\n", "Now", " we", " take", " the", " std", "out", " from", " are", "c", "ord", " and", " pass", " that", " into", " the", " recognize", " method", " on", " the", " ST", "T", " service", " as", " the", " audio", " source", ".", " The", " are", "c", "ord", " process", " will", " run", " forever", " unless", " will", " kill", " it", ".", " So", " we", " set", " a", " timeout", " for", " five", " seconds", " then", " kill", " the", " child", " process", ".", "\n", "\n", "Once", " we", " get", " the", " ST", "T", " result", " back", ",", " we", " grab", " the", " first", " transcript", " from", " the", " response", ",", " trim", " it", " and", " return", " it", ".", "\n", "\n", "Play", " Local", " W", "av", " File", "\n", "\n", "We", " have", " already", " covered", " using", " G", "Streamer", " but", " to", " play", " a", " local", " the", " args", " are", " a", " little", " different", ".", "\n", "\n", "Setup", " Johnny", "-", "Five", "\n", "\n", "Here", " we", " setup", " the", " Edison", " IO", " in", " Johnny", "-", "Five", " and", " listen", " for", " the", " board", " to", " complete", " initialization", ".", " Then", " attach", " a", " button", " to", " GPIO", " pin", " 4", " and", " an", " LED", " to", " GPIO", " 6", ".", " To", " do", " this", " I", " used", " a", " Grove", " Base", " Shield", " along", " with", " the", " Grove", " button", " and", " LED", " modules", ".", " You", " could", " attach", " a", " button", " and", " LED", " using", " a", " bread", "board", " instead", ".", "\n", "\n", "Last", " we", " add", " a", " listener", " on", " the", " button", " press", " event", " which", " will", " call", " the", " main", " function", " that", " we", " will", " look", " at", " next", ".", "\n", "\n", "Main", "\n", "\n", "We", " now", " have", " all", " the", " supporting", " pieces", " so", " let", "'s", " put", " together", " the", " main", " application", " flow", ".", " When", " main", " is", " run", ",", " we", " first", " play", " a", " ch", "ime", " sound", " to", " let", " the", " user", " know", " we", " are", " listening", " by", " using", " the", " play", "W", "av", " defined", " earlier", ".", " You", " can", " download", " the", " w", "av", " file", " I", " used", " from", " the", " projects", " repo", ".", " We", " then", " listen", " for", " a", " command", ",", " perform", " the", " search", ",", " and", " play", " the", " results", " which", " we", " will", " all", " look", " at", " next", ".", "\n", "\n", "Last", " we", " handle", " any", " errors", " that", " may", " have", " happened", " and", " get", " ready", " to", " do", " it", " all", " again", ".", "\n", "\n", "The", " Bread", "-", "and", "-", "But", "ter", "\n", "\n", "The", " listen", " function", " simply", " turns", " on", " the", " LED", " to", " show", " we", " are", " listening", " then", " calls", " st", "t", " to", " capture", " the", " command", ".", "\n", "\n", "The", " search", " function", " uses", " the", " Duck", " Duck", " Go", " Instant", " Answer", " API", " to", " perform", " the", " search", ".", " Then", " returns", " the", " best", " answer", ".", "\n", "\n", "Last", " we", " have", " the", " speak", " function", " that", " takes", " the", " search", " results", " and", " passes", " that", " into", " the", " t", "ts", " function", ".", "\n", "\n", "W", "rap", " Up", "\n", "\n", "Deploy", " the", " code", " to", " your", " Edison", " and", " run", " it", ".", " Wait", " a", " few", " seconds", " for", " the", " app", " to", " initialize", " then", " press", " the", " button", ".", " You", "'ll", " hear", " a", " sound", " and", " the", " LED", " will", " light", " up", ".", " Speak", " your", " search", " phrase", " clearly", " into", " the", " mic", " then", " sit", " back", " and", " enjoy", " your", " new", " toy", ".", "\n", "\n", "You", "'ll", " find", " it", "'s", " great", " at", " handling", " single", " words", " and", " simple", " phrases", ".", " You", " can", " also", " use", " it", " to", " do", " simple", " math", " problems", " by", " starting", " your", " phrase", " with", " \"", "cal", "cul", "ate", "\",", " like", " \"", "cal", "cul", "ate", " five", " plus", " five", ".\"", "\n", "\n", "Below", " you", "'ll", " find", " a", " list", " of", " additional", " resources", " used", " while", " making", " this", " project", " but", " not", " linked", " to", " above", ".", " I", " encourage", " you", " to", " take", " a", " look", " at", " them", " to", " learn", " a", " little", " more", " about", " the", " technologies", " used", ".", " You", " can", " also", " find", " all", " the", " code", " for", " this", " project", " at", " https", "://", "github", ".", "com", "/", "Los", "ant", "/", "example", "-", "ed", "ison", "-", "echo", ".", "\n", "\n", "Enjoy", "!", "\n", "\n", "Additional", " Resources"]