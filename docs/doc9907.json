[">", " draft", "\n", "\n", "Comp", "aring", " Java", " HTTP", " Ser", "vers", "'", " Lat", "encies", "\n", "\n", "Z", "h", "ong", " Yu", ",", " 2014", "-", "07", "-", "28", "\n", "\n", "In", " this", " experiment", ",", " we", " try", " to", " measure", " differences", " in", " lat", "encies", " among", " several", " Java", " HTTP", " servers", " running", " very", " simple", " Hello", "World", " applications", ".", " The", " result", " likely", " reflects", " how", " much", " work", " each", " server", " does", " in", " a", " basic", " request", "-", "response", " cycle", ".", "\n", "\n", "First", ",", " our", " results", ",", " for", " the", " impatient", ":", "\n", "\n", "server", " round", "-", "trip", " (", "ns", ")", " latency", " diff", " (", "ns", ")", " ", "................................", "................", "...", " dummy", " 44", ",", "400", " 0", ",", "000", " undert", "ow", " 52", ",", "600", " 8", ",", "200", " vert", ".", "x", " 55", ",", "900", " 11", ",", "500", " sun", " 58", ",", "100", " 13", ",", "700", " bay", "ou", " 63", ",", "300", " 18", ",", "900", " jet", "ty", " 78", ",", "100", " 33", ",", "700", " tom", "cat", "-", "b", "io", " 93", ",", "500", " 49", ",", "100", " tom", "cat", "-", "n", "io", " 95", ",", "200", " 50", ",", "800", "\n", "\n", "The", " test", " machine", " is", " an", " Amazon", " EC", "2", " m", "3", ".", "x", "large", " instance", " with", " 4", " CPUs", ",", " running", " 64", "bit", " Amazon", " Linux", " AM", "I", ".", " Don", "'t", " let", " the", " name", " fool", " you", ",", " m", "3", ".", "x", "large", " is", " a", " very", " modest", " hardware", ".", " We", " use", " Amazon", " so", " that", " the", " test", " setup", " can", " be", " easily", " replicated", " by", " others", ".", "\n", "\n", "We", " test", " the", " servers", " one", " at", " a", " time", ";", " for", " each", " server", ",", " we", " run", " Apache", "Bench", " on", " the", " same", " machine", " to", " establish", " a", " single", " keep", "-", "al", "ive", " connection", " that", " sends", " 10", " million", " requests", " to", " the", " server", ":", "\n", "\n", "ab", " -", "k", " -", "c", "1", " -", "n", "1", "0000000", " http", "://", "localhost", ":", "80", "80", "/", "\n", "\n", "There", " is", " no", " conc", "urrency", ";", " the", " communication", " is", " strictly", " half", "-", "du", "plex", ";", " both", " Apache", "Bench", " and", " the", " server", " have", " one", " thread", " dedicated", " to", " the", " connection", ";", " the", " two", " threads", " are", " likely", " pinned", " to", " two", " separate", " CPUs", " most", " of", " the", " time", ".", " The", " average", " round", " trip", " time", " for", " a", " request", "-", "response", " cycle", " would", " a", " sum", " of", "\n", "\n", "the", " time", " Apache", "Bench", " spends", " on", " the", " request", "/", "response", ",", "\n", "\n", "the", " time", " the", " TCP", " stack", " (", "local", " loop", "back", ")", " spends", ",", "\n", "\n", "the", " time", " the", " server", " spends", " on", " the", " request", "/", "response", ".", "\n", "\n", "We", " post", "ulate", " that", " the", " first", " two", " items", " are", " constant", ",", " therefore", " the", " differences", " in", " the", " round", " trip", " time", " reflect", " the", " differences", " in", " the", " 3", "rd", " item", ",", " i", ".", "e", ".", " how", " much", " time", " each", " server", " spends", " on", " the", " request", "-", "response", " cycle", ".", "\n", "\n", "The", " following", " servers", " are", " tested", ":", "\n", "\n", "d", "ummy", ",", " a", " phony", " server", " that", " does", " almost", " nothing", ".", " It", "'s", " probably", " as", " far", " as", " we", " can", " get", " in", " Java", ".", " We", " use", " it", " as", " a", " baseline", " in", " comparisons", ";", " Though", " it", " is", " not", " a", " legitimate", " HTTP", " server", ",", " it", "'ll", " fool", " Apache", "Bench", " in", " this", " simple", " experiment", ".", "\n", "\n", "under", "t", "ow", ",", " version", " 1", ".", "0", ".", "15", ".", "\n", "\n", "vert", ".", "x", ",", " version", " 2", ".", "1", ".", "2", ".", "\n", "\n", "sun", " -", " com", ".", "sun", ".", "net", ".", "https", "erver", ".", "Http", "Server", " shipped", " with", " the", " JD", "K", ".", "\n", "\n", "bay", "ou", ",", " version", " 0", ".", "9", ".", "4", ".", "\n", "\n", "Note", ":", " the", " author", " of", " this", " article", " is", " also", " the", " author", " of", " bay", "ou", ".", "\n", "\n", "jet", "ty", ",", " version", " 9", ".", "2", ".", "1", ".", "v", "201", "40", "609", ".", "\n", "\n", "tom", "cat", ",", " version", " 8", ".", "0", ".", "9", ".", " Both", " B", "IO", " (", "blocking", " IO", ")", " and", " N", "IO", " options", " are", " tested", ".", " In", " conf", "/", "server", ".", "xml", ",", " max", "Keep", "Al", "ive", "Requ", "ests", "=\"", "1", "0000000", "\"", " is", " added", " to", " <", "Connector", ">", ",", " and", " access", " log", " is", " disabled", ",", "\n", "\n", "The", " test", " sources", " and", " dependent", " libraries", " can", " be", " found", " on", " https", "://", "github", ".", "com", "/", "zh", "ong", "-", "j", "-", "yu", "/", "lat", "ency", "-", "diff", ".", " We", " create", " a", " Hello", "World", " app", " on", " each", " server", " that", " responds", " with", " a", " 10", "-", "byte", " \"", "Hello", "World", "\"", " text", "/", "plain", " message", " to", " any", " request", ".", " To", " be", " fair", ",", " responses", " generated", " by", " all", " servers", " should", " be", " about", " the", " same", " size", ",", " containing", " same", " amount", " of", " headers", ",", " as", " the", " following", " example", "\n", "\n", "HTTP", "/", "1", ".", "1", " 200", " OK", " Accept", "-", "R", "anges", ":", " bytes", " Content", "-", "Type", ":", " text", "/", "plain", ";", "ch", "ars", "et", "=", "UTF", "-", "8", " ET", "ag", ":", " \"", "t", "-", "53", "d", "5", "df", "40", "-", "185", "19", "600", "\"", " Last", "-", "Mod", "ified", ":", " Mon", ",", " 28", " Jul", " 2014", " 05", ":", "27", ":", "28", " GMT", " Cache", "-", "Control", ":", " private", ",", " no", "-", "cache", " Content", "-", "Length", ":", " 10", " Connection", ":", " keep", "-", "al", "ive", " Date", ":", " Mon", ",", " 28", " Jul", " 2014", " 05", ":", "27", ":", "28", " GMT", " Server", ":", " Bay", "ou", " Hello", "World", "\n", "\n", "All", " servers", " run", " on", " JD", "K", " 8", " u", "20", " b", "23", " (", "link", " to", " tar", ".", "gz", ")", " with", " default", " J", "VM", " settings", ".", "\n", "\n", "As", " previously", " mentioned", ",", " we", " run", " the", " Hello", "World", " app", " of", " each", " server", ",", " use", " Apache", "Bench", " to", " send", " 10", " million", " requests", " over", " a", " single", " keep", "-", "al", "ive", " connection", ".", " The", " average", " requests", "/", "second", " measured", ":", "\n", "\n", "requ", "ests", "/", "second", " dummy", " 22", ",", "500", " undert", "ow", " 19", ",", "000", " vert", ".", "x", " 17", ",", "900", " sun", " 17", ",", "200", " bay", "ou", " 15", ",", "800", " jet", "ty", " 12", ",", "800", " tom", "cat", "-", "b", "io", " 10", ",", "700", " tom", "cat", "-", "n", "io", " 10", ",", "500", "\n", "\n", "The", " inverse", ",", " ns", "/", "request", ",", " is", " the", " round", " trip", " time", " for", " a", " request", "-", "response", " cycle", "\n", "\n", "round", "-", "trip", " (", "ns", ")", " dummy", " 44", ",", "400", " undert", "ow", " 52", ",", "600", " vert", ".", "x", " 55", ",", "900", " sun", " 58", ",", "100", " bay", "ou", " 63", ",", "300", " jet", "ty", " 78", ",", "100", " tom", "cat", "-", "b", "io", " 93", ",", "500", " tom", "cat", "-", "n", "io", " 95", ",", "200", "\n", "\n", "We", " are", " interested", " in", " how", " much", " time", " each", " server", " spends", " on", " its", " own", " code", ".", " Since", " the", " code", " of", " the", " dummy", " server", " does", " almost", " nothing", ",", " we", " use", " it", " as", " the", " baseline", " for", " comparisons", ",", " by", " subtract", "ing", " dummy", "'s", " number", " from", " others", "\n", "\n", "lat", "ency", " diff", " (", "ns", ")", " dummy", " 0", ",", "000", " undert", "ow", " 8", ",", "200", " vert", ".", "x", " 11", ",", "500", " sun", " 13", ",", "700", " bay", "ou", " 18", ",", "900", " jet", "ty", " 33", ",", "700", " tom", "cat", "-", "b", "io", " 49", ",", "100", " tom", "cat", "-", "n", "io", " 50", ",", "800", "\n", "\n", "The", " remaining", " numbers", " likely", " reflect", " how", " much", " work", " each", " server", " does", " for", " the", " request", "-", "response", " cycle", ".", " Part", " of", " the", " differences", " may", " be", " due", " to", " the", " amount", " of", " features", " and", " abstract", "ions", " that", " different", " servers", " have", " to", " support", ".", "\n", "\n", "We", " see", " that", " the", " last", " place", " fin", "isher", ",", " tom", "cat", "-", "n", "io", ",", " adds", " only", " 0", ".", "05", " ms", " to", " the", " latency", " compared", " to", " the", " dummy", " server", ".", " Very", " few", " applications", " need", " to", " worry", " about", " a", " per", "-", "request", " overhead", " at", " that", " level", ".", "\n", "\n", "Any", " of", " the", " Java", " servers", " listed", " here", " is", " probably", " way", " faster", " than", " you", "'ll", " actually", " care", ".", "\n", "\n", "The", " author", " of", " this", " article", " has", " an", " obvious", " conflict", " of", " interest", ".", "\n", "\n", "The", " benchmark", " numbers", " are", " measured", " in", " a", " very", " specific", " environment", " for", " a", " very", " specific", " purpose", ".", " It", "'s", " risky", " to", " extrap", "olate", " the", " numbers", " for", " other", " situations", " and", " purposes", ".", "\n", "\n", "Contact", ":", " bay", "ou", "-", "io", "@", "go", "og", "leg", "roups", ".", "com"]